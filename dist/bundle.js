(()=>{"use strict";function t(t){this.name=t,this.todos=[]}const e=JSON.parse(localStorage.getItem("projects"))||[];function o(o){const s=new t(o);e.push(s),n()}function n(){localStorage.setItem("projects",JSON.stringify(e))}function s(){const t=document.querySelector("#project-list");t.innerHTML="";for(let o=0;o<e.length;o++){const n=document.createElement("div");n.classList.add("project"),n.dataset.projectIndex=`${o}`,n.innerHTML=`\n          <h3>${e[o].name}</h3>\n          <div class="project-actions">\n            <button class="project-btn" data-project-index="${o}">\n              <i class="fas fa-edit edit"></i> \n            </button>\n            <button class="project-btn" data-project-index="${o}">\n              <i class="fas fa-trash-alt delete"></i>\n            </button>\n          </div>\n        `,t.appendChild(n)}}function a(t){const o=document.querySelector(".todo-container");document.querySelector("#project-title").textContent=`${e[t].name}`,document.querySelector(".project-title-section").dataset.projectIndex=`${t}`,document.querySelector(".edit-project-btn").dataset.projectIndex=`${t}`,document.querySelector(".todo-container").dataset.projectIndex=`${t}`,o.innerHTML="",0===e[t].todos.length&&(o.innerHTML="<h3 class='first-todo'>Click on <span>Add Todo + </span>button to add your first todo to project</h3>");for(let n=0;n<e[t].todos.length;n++){const s=document.createElement("div");s.classList.add("todo"),s.dataset.todoIndex=n,s.innerHTML=`\n          <h3 class="todo-title">${e[t].todos[n].title}</h3>\n          <p>\n            <input class="todo-date" type="date" id="date" name="date" value=${e[t].todos[n].dueDate}>\n          </p>\n          <div class="todo-priority">\n            <select class="priority-select">\n              <option value="high" ${"high"===e[t].todos[n].priority?"selected":""}>high\n              </option>\n              <option value="medium" ${"medium"===e[t].todos[n].priority?"selected":""}>medium\n              </option>\n              <option value="low" ${"low"===e[t].todos[n].priority?"selected":""}>low\n              </option>\n            </select>\n            \n          </div>\n          <div class="todo-actions">\n            <label class="complete-checkbox">\n              <span class="complete-label-text">Complete</span>\n              <input class=todo-complete type="checkbox" name="checkbox" ${e[t].todos[n].complete?"checked":""}>\n              <span class="complete-todo-btn"></span>\n            </label>\n            <button class="edit-todo-btn">\n              <i class="fas fa-edit edit-todo"></i> \n            </button>\n            <button class="project-btn">\n              <i class="fas fa-trash-alt delete-todo"></i>\n            </button>\n          </div>\n        `,o.appendChild(s)}}function c(t,e,o,n){this.title=t,this.dueDate=e,this.priority=o,this.complete=n}document.querySelector(".todo-form-select").addEventListener("change",(function(){switch(this.value){case"high":this.classList.remove("medium"),this.classList.remove("low"),this.classList.add("high");break;case"medium":this.classList.add("medium"),this.classList.remove("low"),this.classList.remove("high");break;case"low":this.classList.remove("medium"),this.classList.add("low"),this.classList.remove("high")}}));const d=document.getElementById("project-add"),r=document.getElementById("project-edit"),i=document.getElementById("project-add-btn"),l=document.querySelectorAll(".close-span"),u=document.querySelector("#project-add-form"),p=document.querySelector("#project-edit-form"),m=document.querySelector("#project-list"),h=document.querySelector(".edit-project-btn"),v=document.querySelector(".add-todo-btn"),g=document.querySelector("#todo-add"),f=document.querySelector("#todo-add-form"),L=document.querySelector(".todo-container");function y(t){r.classList.add("show"),document.querySelector("#project-edit-name").value=`${e[t.target.parentNode.getAttribute("data-project-index")].name}`,p.addEventListener("submit",(function o(n){var c,d;n.preventDefault(),r.classList.remove("show"),c=t.target.parentNode.getAttribute("data-project-index"),d=document.querySelector("#project-edit-name").value,e[c].name=d,s(),a(t.target.parentNode.getAttribute("data-project-index")),p.removeEventListener("submit",o)})),n()}i.onclick=function(){d.classList.add("show")},l.forEach((t=>{t.addEventListener("click",(function(){d.classList.remove("show"),r.classList.remove("show"),g.classList.remove("show")}))})),window.onclick=function(t){t.target!=d&&t.target!=r&&t.target!=g||(d.classList.remove("show"),r.classList.remove("show"),g.classList.remove("show"))},u.addEventListener("submit",(function(t){t.preventDefault(),d.classList.remove("show"),o(document.querySelector("#project-name").value),s(),n()})),m.addEventListener("click",(function(t){var o;t.target.classList.contains("delete")&&(o=t.target.parentNode.getAttribute("data-project-index"),e.splice(o,1),s(),n()),t.target.classList.contains("edit")?y(t):t.target.classList.contains("project")?a(t.target.getAttribute("data-project-index")):a(t.target.parentNode.getAttribute("data-project-index"))})),h.addEventListener("click",(function(t){y(t)})),v.addEventListener("click",(function(){g.classList.add("show")})),f.addEventListener("submit",(function(t){t.preventDefault(),g.classList.remove("show");const o=new FormData(f),s=Object.fromEntries(o.entries()),d=new c(s.title,s["due-date"],s.priority,s.complete);!function(t,o){e[t].todos.push(o)}(document.querySelector(".todo-container").dataset.projectIndex,d),a(document.querySelector(".todo-container").dataset.projectIndex),n()})),L.addEventListener("click",(function(t){if(t.target.classList.contains("delete-todo")){const s=document.querySelector(".todo-container").dataset.projectIndex;o=t.target.parentNode.parentNode.parentNode.dataset.todoIndex,e[s].todos.splice(o,1),a(s),n()}var o;if(t.target.classList.contains("edit-todo")){console.log();const o=t.target.parentNode.parentNode.parentNode.querySelector(".todo-title"),s=document.createElement("input");s.classList.add("todo-title"),s.value=o.textContent,o.replaceWith(s),s.focus(),s.addEventListener("keydown",(o=>{if("Enter"===o.key){const o=document.querySelector(".todo-container").dataset.projectIndex;!function(t,o,n){e[t].todos[o].title=n}(o,t.target.parentNode.parentNode.parentNode.dataset.todoIndex,s.value);const c=document.createElement("h3");c.textContent=s.value,s.replaceWith(c),a(o),n()}}))}})),L.addEventListener("change",(function(t){const o=document.querySelector(".todo-container").dataset.projectIndex;t.target.classList.contains("todo-complete")&&function(t,o,n){e[t].todos[o].complete=n}(o,t.target.parentNode.parentNode.parentNode.dataset.todoIndex,t.target.checked),t.target.classList.contains("priority-select")&&function(t,o,n){e[t].todos[o].priority=n}(o,t.target.parentNode.parentNode.dataset.todoIndex,t.target.value),t.target.classList.contains("todo-date")&&function(t,o,n){e[t].todos[o].dueDate=n}(o,t.target.parentNode.parentNode.dataset.todoIndex,t.target.value),a(o),n()})),0===e.length&&o("Default Project"),s(),a(0)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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d2VicGFjazovL3RvLWRvLWxpc3QvLi9zcmMvcHJvamVjdC5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0Ly4vc3JjL2FwcC5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0Ly4vc3JjL2RvbS5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0Ly4vc3JjL3RvZG8uanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL3NyYy9jb250cm9sbGVyLmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gUHJvamVjdChuYW1lKSB7XHJcbiAgdGhpcy5uYW1lID0gbmFtZTtcclxuICB0aGlzLnRvZG9zID0gW107XHJcbn1cclxuXHJcbmV4cG9ydCB7IFByb2plY3QgfTtcclxuIiwiaW1wb3J0IHsgUHJvamVjdCB9IGZyb20gXCIuL3Byb2plY3QuanNcIjtcclxuaW1wb3J0IHsgZGVmYXVsdFByb2plY3QgfSBmcm9tIFwiLi9kZWZhdWx0UHJvamVjdC5qc1wiO1xyXG5cclxuY29uc3QgcHJvamVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwicHJvamVjdHNcIikpIHx8IFtdO1xyXG5cclxuXHJcbmZ1bmN0aW9uIGFkZFByb2plY3QobmFtZSkge1xyXG4gIGNvbnN0IHByb2plY3QgPSBuZXcgUHJvamVjdChuYW1lKTtcclxuICBwcm9qZWN0cy5wdXNoKHByb2plY3QpO1xyXG4gIHNhdmVUb1N0b3JhZ2UoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlUHJvamVjdChpbmRleCkge1xyXG4gIHByb2plY3RzLnNwbGljZShpbmRleCwgMSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVkaXRQcm9qZWN0TmFtZShpbmRleCwgbmV3TmFtZSkge1xyXG4gIHByb2plY3RzW2luZGV4XS5uYW1lID0gbmV3TmFtZTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkVG9kb1RvUHJvamVjdChwcm9qZWN0SW5kZXgsIHRvZG8pIHtcclxuICBwcm9qZWN0c1twcm9qZWN0SW5kZXhdLnRvZG9zLnB1c2godG9kbyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNvbXBsZXRlVG9kbyhwcm9qZWN0SW5kZXgsIHRvZG9JbmRleCwgdmFsdWUpIHtcclxuICBwcm9qZWN0c1twcm9qZWN0SW5kZXhdLnRvZG9zW3RvZG9JbmRleF0uY29tcGxldGUgPSB2YWx1ZTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2hhbmdlVG9kb1ByaW9yaXR5KHByb2plY3RJbmRleCwgdG9kb0luZGV4LCBwcmlvcml0eSkge1xyXG4gIHByb2plY3RzW3Byb2plY3RJbmRleF0udG9kb3NbdG9kb0luZGV4XS5wcmlvcml0eSA9IHByaW9yaXR5O1xyXG59XHJcblxyXG5mdW5jdGlvbiBjaGFuZ2VUb2RvRHVlRGF0ZShwcm9qZWN0SW5kZXgsIHRvZG9JbmRleCwgZGF0ZSkge1xyXG4gIHByb2plY3RzW3Byb2plY3RJbmRleF0udG9kb3NbdG9kb0luZGV4XS5kdWVEYXRlID0gZGF0ZTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2hhbmdlVG9kb05hbWUocHJvamVjdEluZGV4LCB0b2RvSW5kZXgsIG5hbWUpIHtcclxuICBwcm9qZWN0c1twcm9qZWN0SW5kZXhdLnRvZG9zW3RvZG9JbmRleF0udGl0bGUgPSBuYW1lO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW1vdmVUb2RvRnJvbVByb2plY3QocHJvamVjdEluZGV4LCB0b2RvSW5kZXgpIHtcclxuICBwcm9qZWN0c1twcm9qZWN0SW5kZXhdLnRvZG9zLnNwbGljZSh0b2RvSW5kZXgsIDEpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzYXZlVG9TdG9yYWdlKCkge1xyXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicHJvamVjdHNcIiwgSlNPTi5zdHJpbmdpZnkocHJvamVjdHMpKTtcclxufVxyXG5cclxuZXhwb3J0IHtcclxuICBhZGRQcm9qZWN0LFxyXG4gIHJlbW92ZVByb2plY3QsXHJcbiAgZWRpdFByb2plY3ROYW1lLFxyXG4gIGFkZFRvZG9Ub1Byb2plY3QsXHJcbiAgY29tcGxldGVUb2RvLFxyXG4gIGNoYW5nZVRvZG9Qcmlvcml0eSxcclxuICByZW1vdmVUb2RvRnJvbVByb2plY3QsXHJcbiAgY2hhbmdlVG9kb0R1ZURhdGUsXHJcbiAgY2hhbmdlVG9kb05hbWUsXHJcbiAgc2F2ZVRvU3RvcmFnZSxcclxuICBwcm9qZWN0cyxcclxufTtcclxuIiwiaW1wb3J0IHsgcHJvamVjdHMgfSBmcm9tIFwiLi9hcHBcIjtcclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZVByb2plY3RzKCkge1xyXG4gIGNvbnN0IHByb2plY3RMaXN0RGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9qZWN0LWxpc3RcIik7XHJcbiAgcHJvamVjdExpc3REaXYuaW5uZXJIVE1MID0gXCJcIjtcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IHByb2plY3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBjb25zdCBwcm9qZWN0RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIHByb2plY3REaXYuY2xhc3NMaXN0LmFkZChcInByb2plY3RcIik7XHJcbiAgICBwcm9qZWN0RGl2LmRhdGFzZXQucHJvamVjdEluZGV4ID0gYCR7aX1gO1xyXG4gICAgcHJvamVjdERpdi5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgICA8aDM+JHtwcm9qZWN0c1tpXS5uYW1lfTwvaDM+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJvamVjdC1hY3Rpb25zXCI+XHJcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJwcm9qZWN0LWJ0blwiIGRhdGEtcHJvamVjdC1pbmRleD1cIiR7aX1cIj5cclxuICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS1lZGl0IGVkaXRcIj48L2k+IFxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInByb2plY3QtYnRuXCIgZGF0YS1wcm9qZWN0LWluZGV4PVwiJHtpfVwiPlxyXG4gICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLXRyYXNoLWFsdCBkZWxldGVcIj48L2k+XHJcbiAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgYDtcclxuICAgIHByb2plY3RMaXN0RGl2LmFwcGVuZENoaWxkKHByb2plY3REaXYpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlVG9kb3MocHJvamVjdEluZGV4TnVtYmVyKSB7XHJcbiAgY29uc3QgdG9kb0xpc3REaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG8tY29udGFpbmVyXCIpO1xyXG4gIGNvbnN0IHByb2plY3RUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvamVjdC10aXRsZVwiKTtcclxuICBwcm9qZWN0VGl0bGUudGV4dENvbnRlbnQgPSBgJHtwcm9qZWN0c1twcm9qZWN0SW5kZXhOdW1iZXJdLm5hbWV9YDtcclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgXCIucHJvamVjdC10aXRsZS1zZWN0aW9uXCJcclxuICApLmRhdGFzZXQucHJvamVjdEluZGV4ID0gYCR7cHJvamVjdEluZGV4TnVtYmVyfWA7XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgIFwiLmVkaXQtcHJvamVjdC1idG5cIlxyXG4gICkuZGF0YXNldC5wcm9qZWN0SW5kZXggPSBgJHtwcm9qZWN0SW5kZXhOdW1iZXJ9YDtcclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgXCIudG9kby1jb250YWluZXJcIlxyXG4gICkuZGF0YXNldC5wcm9qZWN0SW5kZXggPSBgJHtwcm9qZWN0SW5kZXhOdW1iZXJ9YDtcclxuICB0b2RvTGlzdERpdi5pbm5lckhUTUwgPSBcIlwiO1xyXG4gIGlmIChwcm9qZWN0c1twcm9qZWN0SW5kZXhOdW1iZXJdLnRvZG9zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgdG9kb0xpc3REaXYuaW5uZXJIVE1MID0gXCI8aDMgY2xhc3M9J2ZpcnN0LXRvZG8nPkNsaWNrIG9uIDxzcGFuPkFkZCBUb2RvICsgPC9zcGFuPmJ1dHRvbiB0byBhZGQgeW91ciBmaXJzdCB0b2RvIHRvIHByb2plY3Q8L2gzPlwiXHJcbiAgfSBlbHNlIHtcclxuICAgIFxyXG4gIH1cclxuICBmb3IgKGxldCBpID0gMDsgaSA8IHByb2plY3RzW3Byb2plY3RJbmRleE51bWJlcl0udG9kb3MubGVuZ3RoOyBpKyspIHtcclxuICAgIGNvbnN0IHRvZG9EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgdG9kb0Rpdi5jbGFzc0xpc3QuYWRkKFwidG9kb1wiKTtcclxuICAgIHRvZG9EaXYuZGF0YXNldC50b2RvSW5kZXggPSBpO1xyXG4gICAgdG9kb0Rpdi5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgICA8aDMgY2xhc3M9XCJ0b2RvLXRpdGxlXCI+JHtcclxuICAgICAgICAgICAgcHJvamVjdHNbcHJvamVjdEluZGV4TnVtYmVyXS50b2Rvc1tpXS50aXRsZVxyXG4gICAgICAgICAgfTwvaDM+XHJcbiAgICAgICAgICA8cD5cclxuICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwidG9kby1kYXRlXCIgdHlwZT1cImRhdGVcIiBpZD1cImRhdGVcIiBuYW1lPVwiZGF0ZVwiIHZhbHVlPSR7XHJcbiAgICAgICAgICAgICAgcHJvamVjdHNbcHJvamVjdEluZGV4TnVtYmVyXS50b2Rvc1tpXS5kdWVEYXRlXHJcbiAgICAgICAgICAgIH0+XHJcbiAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidG9kby1wcmlvcml0eVwiPlxyXG4gICAgICAgICAgICA8c2VsZWN0IGNsYXNzPVwicHJpb3JpdHktc2VsZWN0XCI+XHJcbiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cImhpZ2hcIiAke1xyXG4gICAgICAgICAgICAgICAgcHJvamVjdHNbcHJvamVjdEluZGV4TnVtYmVyXS50b2Rvc1tpXS5wcmlvcml0eSA9PT0gXCJoaWdoXCJcclxuICAgICAgICAgICAgICAgICAgPyBcInNlbGVjdGVkXCJcclxuICAgICAgICAgICAgICAgICAgOiBcIlwiXHJcbiAgICAgICAgICAgICAgfT5oaWdoXHJcbiAgICAgICAgICAgICAgPC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIm1lZGl1bVwiICR7XHJcbiAgICAgICAgICAgICAgICBwcm9qZWN0c1twcm9qZWN0SW5kZXhOdW1iZXJdLnRvZG9zW2ldLnByaW9yaXR5ID09PSBcIm1lZGl1bVwiXHJcbiAgICAgICAgICAgICAgICAgID8gXCJzZWxlY3RlZFwiXHJcbiAgICAgICAgICAgICAgICAgIDogXCJcIlxyXG4gICAgICAgICAgICAgIH0+bWVkaXVtXHJcbiAgICAgICAgICAgICAgPC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cImxvd1wiICR7XHJcbiAgICAgICAgICAgICAgICBwcm9qZWN0c1twcm9qZWN0SW5kZXhOdW1iZXJdLnRvZG9zW2ldLnByaW9yaXR5ID09PSBcImxvd1wiXHJcbiAgICAgICAgICAgICAgICAgID8gXCJzZWxlY3RlZFwiXHJcbiAgICAgICAgICAgICAgICAgIDogXCJcIlxyXG4gICAgICAgICAgICAgIH0+bG93XHJcbiAgICAgICAgICAgICAgPC9vcHRpb24+XHJcbiAgICAgICAgICAgIDwvc2VsZWN0PlxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInRvZG8tYWN0aW9uc1wiPlxyXG4gICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJjb21wbGV0ZS1jaGVja2JveFwiPlxyXG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY29tcGxldGUtbGFiZWwtdGV4dFwiPkNvbXBsZXRlPC9zcGFuPlxyXG4gICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz10b2RvLWNvbXBsZXRlIHR5cGU9XCJjaGVja2JveFwiIG5hbWU9XCJjaGVja2JveFwiICR7XHJcbiAgICAgICAgICAgICAgICBwcm9qZWN0c1twcm9qZWN0SW5kZXhOdW1iZXJdLnRvZG9zW2ldLmNvbXBsZXRlID8gXCJjaGVja2VkXCIgOiBcIlwiXHJcbiAgICAgICAgICAgICAgfT5cclxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNvbXBsZXRlLXRvZG8tYnRuXCI+PC9zcGFuPlxyXG4gICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZWRpdC10b2RvLWJ0blwiPlxyXG4gICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLWVkaXQgZWRpdC10b2RvXCI+PC9pPiBcclxuICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJwcm9qZWN0LWJ0blwiPlxyXG4gICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLXRyYXNoLWFsdCBkZWxldGUtdG9kb1wiPjwvaT5cclxuICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICBgO1xyXG4gICAgdG9kb0xpc3REaXYuYXBwZW5kQ2hpbGQodG9kb0Rpdik7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBleHBhbmRUb2RvKHByb2plY3RJbmRleCwgdG9kb0luZGV4KSB7XHJcbiAgLy8gY29uc3QgdG9kbyA9IHByb2plY3RzW3Byb2plY3RJbmRleF0udG9kb3NbdG9kb0luZGV4XTtcclxuICAvLyB0b2RvRGV0YWlsc0Rpdi5pbm5lckhUTUwgPSBgXHJcbiAgLy8gICAgICAgPGgzPiR7dG9kby50aXRsZX08L2gzPlxyXG4gIC8vICAgICAgIDxwPiR7dG9kby5kZXNjcmlwdGlvbn08L3A+XHJcbiAgLy8gICAgICAgPHA+RHVlIERhdGU6ICR7dG9kby5kdWVEYXRlfTwvcD5cclxuICAvLyAgICAgICA8cD5Qcmlvcml0eTogJHt0b2RvLnByaW9yaXR5fTwvcD5cclxuICAvLyAgICAgICA8YnV0dG9uIGNsYXNzPVwiZWRpdC10b2RvLWJ0blwiIGRhdGEtcHJvamVjdC1pbmRleD1cIiR7cHJvamVjdEluZGV4fVwiIGRhdGEtdG9kby1pbmRleD1cIiR7dG9kb0luZGV4fVwiPkVkaXQ8L2J1dHRvbj5cclxuICAvLyAgICAgYDtcclxufVxyXG5cclxuY29uc3QgdG9kb0Zvcm1QcmlvaXJpdHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG8tZm9ybS1zZWxlY3RcIik7XHJcbnRvZG9Gb3JtUHJpb2lyaXR5LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKCkge1xyXG4gIHN3aXRjaCAodGhpcy52YWx1ZSkge1xyXG4gICAgY2FzZSBcImhpZ2hcIjpcclxuICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKFwibWVkaXVtXCIpO1xyXG4gICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoXCJsb3dcIik7XHJcbiAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZChcImhpZ2hcIik7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSBcIm1lZGl1bVwiOlxyXG4gICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoXCJtZWRpdW1cIik7XHJcbiAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZShcImxvd1wiKTtcclxuICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKFwiaGlnaFwiKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIFwibG93XCI6XHJcbiAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZShcIm1lZGl1bVwiKTtcclxuICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKFwibG93XCIpO1xyXG4gICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWdoXCIpO1xyXG4gICAgICBicmVhaztcclxuICB9XHJcbn0pO1xyXG5cclxuZXhwb3J0IHsgdXBkYXRlUHJvamVjdHMsIHVwZGF0ZVRvZG9zLCBleHBhbmRUb2RvIH07XHJcbiIsImZ1bmN0aW9uIFRvZG8odGl0bGUsIGR1ZURhdGUsIHByaW9yaXR5LCBjb21wbGV0ZSkge1xyXG4gIHRoaXMudGl0bGUgPSB0aXRsZTtcclxuICB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlO1xyXG4gIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcclxuICB0aGlzLmNvbXBsZXRlID0gY29tcGxldGU7XHJcbn1cclxuXHJcbmV4cG9ydCB7IFRvZG8gfTtcclxuIiwiaW1wb3J0IHtcclxuICBhZGRUb2RvVG9Qcm9qZWN0LFxyXG4gIGNoYW5nZVRvZG9Qcmlvcml0eSxcclxuICBjb21wbGV0ZVRvZG8sXHJcbiAgcHJvamVjdHMsXHJcbiAgcmVtb3ZlVG9kb0Zyb21Qcm9qZWN0LFxyXG4gIGNoYW5nZVRvZG9EdWVEYXRlLFxyXG4gIGNoYW5nZVRvZG9OYW1lLFxyXG4gIHNhdmVUb1N0b3JhZ2UsXHJcbn0gZnJvbSBcIi4vYXBwXCI7XHJcbmltcG9ydCB7IHVwZGF0ZVByb2plY3RzLCB1cGRhdGVUb2RvcyB9IGZyb20gXCIuL2RvbVwiO1xyXG5pbXBvcnQgeyBhZGRQcm9qZWN0LCByZW1vdmVQcm9qZWN0LCBlZGl0UHJvamVjdE5hbWUgfSBmcm9tIFwiLi9hcHBcIjtcclxuaW1wb3J0IHsgVG9kbyB9IGZyb20gXCIuL3RvZG9cIjtcclxuXHJcbmNvbnN0IHByb2plY3RBZGRNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdC1hZGRcIik7XHJcbmNvbnN0IHByb2plY3RFZGl0TW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3QtZWRpdFwiKTtcclxuY29uc3QgcHJvamVjdEFkZEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdC1hZGQtYnRuXCIpO1xyXG5jb25zdCBjbG9zZVNwYW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNsb3NlLXNwYW5cIik7XHJcbmNvbnN0IHByb2plY3RBZGRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9qZWN0LWFkZC1mb3JtXCIpO1xyXG5jb25zdCBwcm9qZWN0RWRpdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3QtZWRpdC1mb3JtXCIpO1xyXG5jb25zdCBwcm9qZWN0TGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvamVjdC1saXN0XCIpO1xyXG5jb25zdCBlZGl0SGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LXByb2plY3QtYnRuXCIpO1xyXG5jb25zdCBhZGRUb2RvQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtdG9kby1idG5cIik7XHJcbmNvbnN0IHRvZG9BZGRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdG9kby1hZGRcIik7XHJcbmNvbnN0IHRvZG9BZGRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0b2RvLWFkZC1mb3JtXCIpO1xyXG5jb25zdCB0b2RvQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvLWNvbnRhaW5lclwiKTtcclxuXHJcbnByb2plY3RBZGRCdG4ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICBwcm9qZWN0QWRkTW9kYWwuY2xhc3NMaXN0LmFkZChcInNob3dcIik7XHJcbn07XHJcblxyXG5jbG9zZVNwYW4uZm9yRWFjaCgoc3BhbikgPT4ge1xyXG4gIHNwYW4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgIHByb2plY3RBZGRNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcclxuICAgIHByb2plY3RFZGl0TW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcInNob3dcIik7XHJcbiAgICB0b2RvQWRkTW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcInNob3dcIik7XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxud2luZG93Lm9uY2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICBpZiAoXHJcbiAgICBldmVudC50YXJnZXQgPT0gcHJvamVjdEFkZE1vZGFsIHx8XHJcbiAgICBldmVudC50YXJnZXQgPT0gcHJvamVjdEVkaXRNb2RhbCB8fFxyXG4gICAgZXZlbnQudGFyZ2V0ID09IHRvZG9BZGRNb2RhbFxyXG4gICkge1xyXG4gICAgcHJvamVjdEFkZE1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93XCIpO1xyXG4gICAgcHJvamVjdEVkaXRNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcclxuICAgIHRvZG9BZGRNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcclxuICB9XHJcbn07XHJcblxyXG5wcm9qZWN0QWRkRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgcHJvamVjdEFkZE1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93XCIpO1xyXG4gIGFkZFByb2plY3QoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9qZWN0LW5hbWVcIikudmFsdWUpO1xyXG4gIHVwZGF0ZVByb2plY3RzKCk7XHJcbiAgc2F2ZVRvU3RvcmFnZSgpO1xyXG59KTtcclxuXHJcbnByb2plY3RMaXN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xyXG4gIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJkZWxldGVcIikpIHtcclxuICAgIHJlbW92ZVByb2plY3QoZS50YXJnZXQucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXByb2plY3QtaW5kZXhcIikpO1xyXG4gICAgdXBkYXRlUHJvamVjdHMoKTtcclxuICAgIHNhdmVUb1N0b3JhZ2UoKTtcclxuICB9XHJcbiAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImVkaXRcIikpIHtcclxuICAgIGVkaXRQcm9qZWN0KGUpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicHJvamVjdFwiKSkge1xyXG4gICAgdXBkYXRlVG9kb3MoZS50YXJnZXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1wcm9qZWN0LWluZGV4XCIpKTtcclxuICB9IGVsc2Uge1xyXG4gICAgdXBkYXRlVG9kb3MoZS50YXJnZXQucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXByb2plY3QtaW5kZXhcIikpO1xyXG4gIH1cclxufSk7XHJcblxyXG5lZGl0SGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xyXG4gIGVkaXRQcm9qZWN0KGUpO1xyXG59KTtcclxuXHJcbmFkZFRvZG9CdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICB0b2RvQWRkTW9kYWwuY2xhc3NMaXN0LmFkZChcInNob3dcIik7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gZWRpdFByb2plY3QoZSkge1xyXG4gIHByb2plY3RFZGl0TW9kYWwuY2xhc3NMaXN0LmFkZChcInNob3dcIik7XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9qZWN0LWVkaXQtbmFtZVwiKS52YWx1ZSA9IGAke1xyXG4gICAgcHJvamVjdHNbZS50YXJnZXQucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXByb2plY3QtaW5kZXhcIildLm5hbWVcclxuICB9YDtcclxuICBwcm9qZWN0RWRpdEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBmdW5jdGlvbiBfbGlzdGVuZXIoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBwcm9qZWN0RWRpdE1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93XCIpO1xyXG4gICAgZWRpdFByb2plY3ROYW1lKFxyXG4gICAgICBlLnRhcmdldC5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZShcImRhdGEtcHJvamVjdC1pbmRleFwiKSxcclxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9qZWN0LWVkaXQtbmFtZVwiKS52YWx1ZVxyXG4gICAgKTtcclxuICAgIHVwZGF0ZVByb2plY3RzKCk7XHJcbiAgICB1cGRhdGVUb2RvcyhlLnRhcmdldC5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZShcImRhdGEtcHJvamVjdC1pbmRleFwiKSk7XHJcbiAgICBwcm9qZWN0RWRpdEZvcm0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBfbGlzdGVuZXIpO1xyXG4gIH0pO1xyXG4gIHNhdmVUb1N0b3JhZ2UoKTtcclxufVxyXG5cclxudG9kb0FkZEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoZSkge1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuICB0b2RvQWRkTW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcInNob3dcIik7XHJcbiAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEodG9kb0FkZEZvcm0pO1xyXG4gIGNvbnN0IHZhbHVlcyA9IE9iamVjdC5mcm9tRW50cmllcyhmb3JtRGF0YS5lbnRyaWVzKCkpO1xyXG4gIGNvbnN0IHRvZG8gPSBuZXcgVG9kbyhcclxuICAgIHZhbHVlc1tcInRpdGxlXCJdLFxyXG4gICAgdmFsdWVzW1wiZHVlLWRhdGVcIl0sXHJcbiAgICB2YWx1ZXNbXCJwcmlvcml0eVwiXSxcclxuICAgIHZhbHVlc1tcImNvbXBsZXRlXCJdXHJcbiAgKTtcclxuICBhZGRUb2RvVG9Qcm9qZWN0KFxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvLWNvbnRhaW5lclwiKS5kYXRhc2V0LnByb2plY3RJbmRleCxcclxuICAgIHRvZG9cclxuICApO1xyXG4gIHVwZGF0ZVRvZG9zKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kby1jb250YWluZXJcIikuZGF0YXNldC5wcm9qZWN0SW5kZXgpO1xyXG4gIHNhdmVUb1N0b3JhZ2UoKTtcclxufSk7XHJcblxyXG50b2RvQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xyXG4gIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJkZWxldGUtdG9kb1wiKSkge1xyXG4gICAgY29uc3QgcHJvamVjdEluZGV4VG9SZW1vdmUgPVxyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG8tY29udGFpbmVyXCIpLmRhdGFzZXQucHJvamVjdEluZGV4O1xyXG4gICAgY29uc3QgdG9kb0luZGV4VG9SZW1vdmUgPVxyXG4gICAgICBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5kYXRhc2V0LnRvZG9JbmRleDtcclxuICAgIHJlbW92ZVRvZG9Gcm9tUHJvamVjdChwcm9qZWN0SW5kZXhUb1JlbW92ZSwgdG9kb0luZGV4VG9SZW1vdmUpO1xyXG4gICAgdXBkYXRlVG9kb3MocHJvamVjdEluZGV4VG9SZW1vdmUpO1xyXG4gICAgc2F2ZVRvU3RvcmFnZSgpO1xyXG4gIH1cclxuXHJcbiAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImVkaXQtdG9kb1wiKSkge1xyXG4gICAgY29uc29sZS5sb2coKTtcclxuICAgIGNvbnN0IHRvZG9UaXRsZSA9XHJcbiAgICAgIGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoXCIudG9kby10aXRsZVwiKTtcclxuICAgIGNvbnN0IGlucHV0RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQoXCJ0b2RvLXRpdGxlXCIpO1xyXG4gICAgaW5wdXRFbC52YWx1ZSA9IHRvZG9UaXRsZS50ZXh0Q29udGVudDtcclxuICAgIHRvZG9UaXRsZS5yZXBsYWNlV2l0aChpbnB1dEVsKTtcclxuICAgIGlucHV0RWwuZm9jdXMoKTtcclxuICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGV2KSA9PiB7XHJcbiAgICAgIGlmIChldi5rZXkgPT09IFwiRW50ZXJcIikge1xyXG4gICAgICAgIGNvbnN0IHByb2plY3RJbmRleFRvRWRpdCA9XHJcbiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG8tY29udGFpbmVyXCIpLmRhdGFzZXQucHJvamVjdEluZGV4O1xyXG4gICAgICAgIGNvbnN0IHRvZG9JbmRleFRvRWRpdCA9XHJcbiAgICAgICAgICBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5kYXRhc2V0LnRvZG9JbmRleDtcclxuICAgICAgICBjaGFuZ2VUb2RvTmFtZShwcm9qZWN0SW5kZXhUb0VkaXQsIHRvZG9JbmRleFRvRWRpdCwgaW5wdXRFbC52YWx1ZSk7XHJcbiAgICAgICAgY29uc3QgbmV3VGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDNcIik7XHJcbiAgICAgICAgbmV3VGl0bGUudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbHVlO1xyXG4gICAgICAgIGlucHV0RWwucmVwbGFjZVdpdGgobmV3VGl0bGUpO1xyXG4gICAgICAgIHVwZGF0ZVRvZG9zKHByb2plY3RJbmRleFRvRWRpdCk7XHJcbiAgICAgICAgc2F2ZVRvU3RvcmFnZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxudG9kb0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgY29uc3QgcHJvamVjdEluZGV4ID1cclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kby1jb250YWluZXJcIikuZGF0YXNldC5wcm9qZWN0SW5kZXg7XHJcbiAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInRvZG8tY29tcGxldGVcIikpIHtcclxuICAgIGNvbnN0IHRvZG9JbmRleFRvQ29tcGxldGUgPVxyXG4gICAgICBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5kYXRhc2V0LnRvZG9JbmRleDtcclxuICAgIGNvbXBsZXRlVG9kbyhwcm9qZWN0SW5kZXgsIHRvZG9JbmRleFRvQ29tcGxldGUsIGUudGFyZ2V0LmNoZWNrZWQpO1xyXG4gIH1cclxuICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicHJpb3JpdHktc2VsZWN0XCIpKSB7XHJcbiAgICBjb25zdCB0b2RvSW5kZXhUb1ByaW9yaXR5ID1cclxuICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmRhdGFzZXQudG9kb0luZGV4O1xyXG4gICAgY2hhbmdlVG9kb1ByaW9yaXR5KHByb2plY3RJbmRleCwgdG9kb0luZGV4VG9Qcmlvcml0eSwgZS50YXJnZXQudmFsdWUpO1xyXG4gIH1cclxuICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidG9kby1kYXRlXCIpKSB7XHJcbiAgICBjb25zdCB0b2RvSW5kZXhUb0RhdGUgPSBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuZGF0YXNldC50b2RvSW5kZXg7XHJcbiAgICBjaGFuZ2VUb2RvRHVlRGF0ZShwcm9qZWN0SW5kZXgsIHRvZG9JbmRleFRvRGF0ZSwgZS50YXJnZXQudmFsdWUpO1xyXG4gIH1cclxuICB1cGRhdGVUb2Rvcyhwcm9qZWN0SW5kZXgpO1xyXG4gIHNhdmVUb1N0b3JhZ2UoKTtcclxufSk7XHJcbiIsImltcG9ydCB7IFRvZG8gfSBmcm9tIFwiLi90b2RvLmpzXCI7XHJcbmltcG9ydCB7IHVwZGF0ZVByb2plY3RzLCB1cGRhdGVUb2RvcywgZXhwYW5kVG9kbyB9IGZyb20gXCIuL2RvbS5qc1wiO1xyXG5pbXBvcnQgeyBhZGRQcm9qZWN0LCBwcm9qZWN0cyB9IGZyb20gXCIuL2FwcC5qc1wiO1xyXG5pbXBvcnQgXCIuL2NvbnRyb2xsZXIuanNcIjtcclxuXHJcbi8vIGNvbnN0IHRvZG8xID0gbmV3IFRvZG8oXHJcbi8vICAgXCJGaW5pc2ggcHJvamVjdFwiLFxyXG4vLyAgIFwiMjAyMy0wNC0wMVwiLFxyXG4vLyAgIFwibWVkaXVtXCIsXHJcbi8vICAgdHJ1ZVxyXG4vLyApO1xyXG4vLyBhZGRUb2RvVG9Qcm9qZWN0KDAsIHRvZG8xKTtcclxuLy8gYWRkVG9kb1RvUHJvamVjdCgwLCB0b2RvMSk7XHJcbi8vIGFkZFRvZG9Ub1Byb2plY3QoMCwgdG9kbzEpO1xyXG5cclxuLy8gYWRkUHJvamVjdChcIlNob3BwaW5nIExpc3RcIik7XHJcbi8vIGNvbnN0IHRvZG8yID0gbmV3IFRvZG8oXHJcbi8vICAgXCJCdXkgZ3JvY2VyaWVzXCIsXHJcbi8vICAgXCIyMDIzLTA0LTAzXCIsXHJcbi8vICAgXCJtZWRpdW1cIixcclxuLy8gICB0cnVlXHJcbi8vICk7XHJcbi8vIGFkZFRvZG9Ub1Byb2plY3QoMSwgdG9kbzIpO1xyXG5pZiAocHJvamVjdHMubGVuZ3RoID09PSAwKSB7XHJcbiAgYWRkUHJvamVjdChcIkRlZmF1bHQgUHJvamVjdFwiKTtcclxufVxyXG5cclxudXBkYXRlUHJvamVjdHMoKTtcclxudXBkYXRlVG9kb3MoMCk7XHJcbiJdLCJuYW1lcyI6WyJQcm9qZWN0IiwibmFtZSIsInRoaXMiLCJ0b2RvcyIsInByb2plY3RzIiwiSlNPTiIsInBhcnNlIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImFkZFByb2plY3QiLCJwcm9qZWN0IiwicHVzaCIsInNhdmVUb1N0b3JhZ2UiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwidXBkYXRlUHJvamVjdHMiLCJwcm9qZWN0TGlzdERpdiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImlubmVySFRNTCIsImkiLCJsZW5ndGgiLCJwcm9qZWN0RGl2IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImRhdGFzZXQiLCJwcm9qZWN0SW5kZXgiLCJhcHBlbmRDaGlsZCIsInVwZGF0ZVRvZG9zIiwicHJvamVjdEluZGV4TnVtYmVyIiwidG9kb0xpc3REaXYiLCJ0ZXh0Q29udGVudCIsInRvZG9EaXYiLCJ0b2RvSW5kZXgiLCJ0aXRsZSIsImR1ZURhdGUiLCJwcmlvcml0eSIsImNvbXBsZXRlIiwiVG9kbyIsImFkZEV2ZW50TGlzdGVuZXIiLCJ2YWx1ZSIsInJlbW92ZSIsInByb2plY3RBZGRNb2RhbCIsImdldEVsZW1lbnRCeUlkIiwicHJvamVjdEVkaXRNb2RhbCIsInByb2plY3RBZGRCdG4iLCJjbG9zZVNwYW4iLCJxdWVyeVNlbGVjdG9yQWxsIiwicHJvamVjdEFkZEZvcm0iLCJwcm9qZWN0RWRpdEZvcm0iLCJwcm9qZWN0TGlzdCIsImVkaXRIZWFkZXIiLCJhZGRUb2RvQnRuIiwidG9kb0FkZE1vZGFsIiwidG9kb0FkZEZvcm0iLCJ0b2RvQ29udGFpbmVyIiwiZWRpdFByb2plY3QiLCJlIiwidGFyZ2V0IiwicGFyZW50Tm9kZSIsImdldEF0dHJpYnV0ZSIsIl9saXN0ZW5lciIsImV2ZW50IiwiaW5kZXgiLCJuZXdOYW1lIiwicHJldmVudERlZmF1bHQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwib25jbGljayIsImZvckVhY2giLCJzcGFuIiwid2luZG93IiwiY29udGFpbnMiLCJzcGxpY2UiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwidmFsdWVzIiwiT2JqZWN0IiwiZnJvbUVudHJpZXMiLCJlbnRyaWVzIiwidG9kbyIsImFkZFRvZG9Ub1Byb2plY3QiLCJwcm9qZWN0SW5kZXhUb1JlbW92ZSIsImNvbnNvbGUiLCJsb2ciLCJ0b2RvVGl0bGUiLCJpbnB1dEVsIiwicmVwbGFjZVdpdGgiLCJmb2N1cyIsImV2Iiwia2V5IiwicHJvamVjdEluZGV4VG9FZGl0IiwiY2hhbmdlVG9kb05hbWUiLCJuZXdUaXRsZSIsImNvbXBsZXRlVG9kbyIsImNoZWNrZWQiLCJjaGFuZ2VUb2RvUHJpb3JpdHkiLCJkYXRlIiwiY2hhbmdlVG9kb0R1ZURhdGUiXSwic291cmNlUm9vdCI6IiJ9