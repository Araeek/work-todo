(()=>{"use strict";function t(t,e,o,n){this.title=t,this.dueDate=e,this.priority=o,this.complete=n}function e(t){this.name=t,this.todos=[]}const o=[new e("Default")];function n(t){const n=new e(t);o.push(n)}function s(t,e){o[t].todos.push(e)}function c(){const t=document.querySelector("#project-list");t.innerHTML="";for(let e=0;e<o.length;e++){const n=document.createElement("div");n.classList.add("project"),n.dataset.projectIndex=`${e}`,n.innerHTML=`\n          <h3>${o[e].name}</h3>\n          <div class="project-actions">\n            <button class="project-btn" data-project-index="${e}">\n              <i class="fas fa-edit edit"></i> \n            </button>\n            <button class="project-btn" data-project-index="${e}">\n              <i class="fas fa-trash-alt delete"></i>\n            </button>\n          </div>\n        `,t.appendChild(n)}}function a(t){const e=document.querySelector(".todo-container");document.querySelector("#project-title").textContent=`${o[t].name}`,document.querySelector(".project-title-section").dataset.projectIndex=`${t}`,document.querySelector(".edit-project-btn").dataset.projectIndex=`${t}`,document.querySelector(".todo-container").dataset.projectIndex=`${t}`,e.innerHTML="";for(let n=0;n<o[t].todos.length;n++){const s=document.createElement("div");s.classList.add("todo"),s.dataset.todoIndex=n,s.innerHTML=`\n          <h3>${o[t].todos[n].title}</h3>\n          <p>\n            <input type="date" id="date" name="date" value=${o[t].todos[n].dueDate}>\n          </p>\n          <div class="todo-priority">\n            <select class="priority-select">\n              <option value="high" ${"high"===o[t].todos[n].priority?"selected":""}>high\n              </option>\n              <option value="medium" ${"medium"===o[t].todos[n].priority?"selected":""}>medium\n              </option>\n              <option value="low" ${"low"===o[t].todos[n].priority?"selected":""}>low\n              </option>\n            </select>\n            \n          </div>\n          <div class="todo-actions">\n            <label class="complete-checkbox">\n              <span class="complete-label-text">Complete</span>\n              <input class=todo-complete type="checkbox" name="checkbox" ${o[t].todos[n].complete?"checked":""}>\n              <span class="complete-todo-btn"></span>\n            </label>\n            <button class="edit-todo-btn">\n              <i class="fas fa-edit"></i> \n            </button>\n            <button class="project-btn">\n              <i class="fas fa-trash-alt delete-todo"></i>\n            </button>\n          </div>\n        `,e.appendChild(s)}}document.querySelector(".todo-form-select").addEventListener("change",(function(){switch(this.value){case"high":this.classList.remove("medium"),this.classList.remove("low"),this.classList.add("high");break;case"medium":this.classList.add("medium"),this.classList.remove("low"),this.classList.remove("high");break;case"low":this.classList.remove("medium"),this.classList.add("low"),this.classList.remove("high")}}));const d=document.getElementById("project-add"),i=document.getElementById("project-edit"),r=document.getElementById("project-add-btn"),l=document.querySelectorAll(".close-span"),u=document.querySelector("#project-add-form"),p=document.querySelector("#project-edit-form"),m=document.querySelector("#project-list"),h=document.querySelector(".edit-project-btn"),v=document.querySelector(".add-todo-btn"),L=document.querySelector("#todo-add"),f=document.querySelector("#todo-add-form"),g=document.querySelector(".todo-container");function j(t){i.classList.add("show"),document.querySelector("#project-edit-name").value=`${o[t.target.parentNode.getAttribute("data-project-index")].name}`,p.addEventListener("submit",(function e(n){var s,d;n.preventDefault(),i.classList.remove("show"),s=t.target.parentNode.getAttribute("data-project-index"),d=document.querySelector("#project-edit-name").value,o[s].name=d,c(),a(t.target.parentNode.getAttribute("data-project-index")),p.removeEventListener("submit",e)}))}r.onclick=function(){d.classList.add("show")},l.forEach((t=>{t.addEventListener("click",(function(){d.classList.remove("show"),i.classList.remove("show"),L.classList.remove("show")}))})),window.onclick=function(t){t.target!=d&&t.target!=i&&t.target!=L||(d.classList.remove("show"),i.classList.remove("show"),L.classList.remove("show"))},u.addEventListener("submit",(function(t){t.preventDefault(),d.classList.remove("show"),n(document.querySelector("#project-name").value),c()})),m.addEventListener("click",(function(t){var e;t.target.classList.contains("delete")&&(e=t.target.parentNode.getAttribute("data-project-index"),o.splice(e,1),c()),t.target.classList.contains("edit")?j(t):t.target.classList.contains("project")?a(t.target.getAttribute("data-project-index")):a(t.target.parentNode.getAttribute("data-project-index"))})),h.addEventListener("click",(function(t){j(t)})),v.addEventListener("click",(function(){L.classList.add("show")})),f.addEventListener("submit",(function(e){e.preventDefault(),L.classList.remove("show");const o=new FormData(f),n=Object.fromEntries(o.entries()),c=new t(n.title,n["due-date"],n.priority,n.complete);s(document.querySelector(".todo-container").dataset.projectIndex,c),a(document.querySelector(".todo-container").dataset.projectIndex)})),g.addEventListener("click",(function(t){if(t.target.classList.contains("delete-todo")){const n=document.querySelector(".todo-container").dataset.projectIndex;e=t.target.parentNode.parentNode.parentNode.dataset.todoIndex,o[n].todos.splice(e,1),a(n)}var e})),g.addEventListener("change",(function(t){const e=document.querySelector(".todo-container").dataset.projectIndex;t.target.classList.contains("todo-complete")&&function(t,e,n){o[t].todos[e].complete=n}(e,t.target.parentNode.parentNode.parentNode.dataset.todoIndex,t.target.checked),t.target.classList.contains("priority-select")&&function(t,e,n){o[t].todos[e].priority=n}(e,t.target.parentNode.parentNode.dataset.todoIndex,t.target.value),a(e)}));const y=new t("Finish project","2023-04-01","medium",!0);s(0,y),s(0,y),s(0,y),n("Shopping List"),s(1,new t("Buy groceries","2023-04-03","medium",!0)),c(),a(0)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUliLEVBQ2hCLGdCQUNBLGFBQ0EsVUFDQSxJQUlGZ0IsSUFDQWEsRUFBWSxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL3NyYy90b2RvLmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9zcmMvcHJvamVjdC5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0Ly4vc3JjL2RlZmF1bHRQcm9qZWN0LmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9zcmMvYXBwLmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9zcmMvZG9tLmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9zcmMvY29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0Ly4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIFRvZG8odGl0bGUsIGR1ZURhdGUsIHByaW9yaXR5LCBjb21wbGV0ZSkge1xyXG4gIHRoaXMudGl0bGUgPSB0aXRsZTtcclxuICB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlO1xyXG4gIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcclxuICB0aGlzLmNvbXBsZXRlID0gY29tcGxldGU7XHJcbn1cclxuXHJcbmV4cG9ydCB7IFRvZG8gfTtcclxuIiwiZnVuY3Rpb24gUHJvamVjdChuYW1lKSB7XHJcbiAgdGhpcy5uYW1lID0gbmFtZTtcclxuICB0aGlzLnRvZG9zID0gW107XHJcbn1cclxuXHJcbmV4cG9ydCB7IFByb2plY3QgfTtcclxuIiwiaW1wb3J0IHsgUHJvamVjdCB9IGZyb20gJy4vcHJvamVjdC5qcyc7XHJcblxyXG5jb25zdCBkZWZhdWx0UHJvamVjdCA9IG5ldyBQcm9qZWN0KFwiRGVmYXVsdFwiKTtcclxuXHJcbmV4cG9ydCB7IGRlZmF1bHRQcm9qZWN0IH07XHJcbiIsImltcG9ydCB7IFByb2plY3QgfSBmcm9tIFwiLi9wcm9qZWN0LmpzXCI7XHJcbmltcG9ydCB7IGRlZmF1bHRQcm9qZWN0IH0gZnJvbSBcIi4vZGVmYXVsdFByb2plY3QuanNcIjtcclxuXHJcbmNvbnN0IHByb2plY3RzID0gW2RlZmF1bHRQcm9qZWN0XTtcclxuXHJcbmZ1bmN0aW9uIGFkZFByb2plY3QobmFtZSkge1xyXG4gIGNvbnN0IHByb2plY3QgPSBuZXcgUHJvamVjdChuYW1lKTtcclxuICBwcm9qZWN0cy5wdXNoKHByb2plY3QpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW1vdmVQcm9qZWN0KGluZGV4KSB7XHJcbiAgcHJvamVjdHMuc3BsaWNlKGluZGV4LCAxKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZWRpdFByb2plY3ROYW1lKGluZGV4LCBuZXdOYW1lKSB7XHJcbiAgcHJvamVjdHNbaW5kZXhdLm5hbWUgPSBuZXdOYW1lO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRUb2RvVG9Qcm9qZWN0KHByb2plY3RJbmRleCwgdG9kbykge1xyXG4gIHByb2plY3RzW3Byb2plY3RJbmRleF0udG9kb3MucHVzaCh0b2RvKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY29tcGxldGVUb2RvKHByb2plY3RJbmRleCwgdG9kb0luZGV4LCB2YWx1ZSkge1xyXG4gIHByb2plY3RzW3Byb2plY3RJbmRleF0udG9kb3NbdG9kb0luZGV4XS5jb21wbGV0ZSA9IHZhbHVlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjaGFuZ2VUb2RvUHJpb3JpdHkocHJvamVjdEluZGV4LCB0b2RvSW5kZXgsIHByaW9yaXR5KSB7XHJcbiAgcHJvamVjdHNbcHJvamVjdEluZGV4XS50b2Rvc1t0b2RvSW5kZXhdLnByaW9yaXR5ID0gcHJpb3JpdHk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZVRvZG9Gcm9tUHJvamVjdChwcm9qZWN0SW5kZXgsIHRvZG9JbmRleCkge1xyXG4gIHByb2plY3RzW3Byb2plY3RJbmRleF0udG9kb3Muc3BsaWNlKHRvZG9JbmRleCwgMSk7XHJcbn1cclxuXHJcbmV4cG9ydCB7XHJcbiAgYWRkUHJvamVjdCxcclxuICByZW1vdmVQcm9qZWN0LFxyXG4gIGVkaXRQcm9qZWN0TmFtZSxcclxuICBhZGRUb2RvVG9Qcm9qZWN0LFxyXG4gIGNvbXBsZXRlVG9kbyxcclxuICBjaGFuZ2VUb2RvUHJpb3JpdHksXHJcbiAgcmVtb3ZlVG9kb0Zyb21Qcm9qZWN0LFxyXG4gIHByb2plY3RzLFxyXG59O1xyXG4iLCJpbXBvcnQgeyBwcm9qZWN0cyB9IGZyb20gXCIuL2FwcFwiO1xyXG5cclxuZnVuY3Rpb24gdXBkYXRlUHJvamVjdHMoKSB7XHJcbiAgY29uc3QgcHJvamVjdExpc3REaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3QtbGlzdFwiKTtcclxuICBwcm9qZWN0TGlzdERpdi5pbm5lckhUTUwgPSBcIlwiO1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvamVjdHMubGVuZ3RoOyBpKyspIHtcclxuICAgIGNvbnN0IHByb2plY3REaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgcHJvamVjdERpdi5jbGFzc0xpc3QuYWRkKFwicHJvamVjdFwiKTtcclxuICAgIHByb2plY3REaXYuZGF0YXNldC5wcm9qZWN0SW5kZXggPSBgJHtpfWA7XHJcbiAgICBwcm9qZWN0RGl2LmlubmVySFRNTCA9IGBcclxuICAgICAgICAgIDxoMz4ke3Byb2plY3RzW2ldLm5hbWV9PC9oMz5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcm9qZWN0LWFjdGlvbnNcIj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInByb2plY3QtYnRuXCIgZGF0YS1wcm9qZWN0LWluZGV4PVwiJHtpfVwiPlxyXG4gICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLWVkaXQgZWRpdFwiPjwvaT4gXHJcbiAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwicHJvamVjdC1idG5cIiBkYXRhLXByb2plY3QtaW5kZXg9XCIke2l9XCI+XHJcbiAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtdHJhc2gtYWx0IGRlbGV0ZVwiPjwvaT5cclxuICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICBgO1xyXG4gICAgcHJvamVjdExpc3REaXYuYXBwZW5kQ2hpbGQocHJvamVjdERpdik7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVUb2Rvcyhwcm9qZWN0SW5kZXhOdW1iZXIpIHtcclxuICBjb25zdCB0b2RvTGlzdERpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kby1jb250YWluZXJcIik7XHJcbiAgY29uc3QgcHJvamVjdFRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9qZWN0LXRpdGxlXCIpO1xyXG4gIHByb2plY3RUaXRsZS50ZXh0Q29udGVudCA9IGAke3Byb2plY3RzW3Byb2plY3RJbmRleE51bWJlcl0ubmFtZX1gO1xyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC10aXRsZS1zZWN0aW9uXCIpLmRhdGFzZXQucHJvamVjdEluZGV4ID0gYCR7cHJvamVjdEluZGV4TnVtYmVyfWA7XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LXByb2plY3QtYnRuXCIpLmRhdGFzZXQucHJvamVjdEluZGV4ID0gYCR7cHJvamVjdEluZGV4TnVtYmVyfWA7XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvLWNvbnRhaW5lclwiKS5kYXRhc2V0LnByb2plY3RJbmRleCA9IGAke3Byb2plY3RJbmRleE51bWJlcn1gO1xyXG4gIHRvZG9MaXN0RGl2LmlubmVySFRNTCA9IFwiXCI7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm9qZWN0c1twcm9qZWN0SW5kZXhOdW1iZXJdLnRvZG9zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBjb25zdCB0b2RvRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIHRvZG9EaXYuY2xhc3NMaXN0LmFkZChcInRvZG9cIik7XHJcbiAgICB0b2RvRGl2LmRhdGFzZXQudG9kb0luZGV4ID0gaTtcclxuICAgIHRvZG9EaXYuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgPGgzPiR7cHJvamVjdHNbcHJvamVjdEluZGV4TnVtYmVyXS50b2Rvc1tpXS50aXRsZX08L2gzPlxyXG4gICAgICAgICAgPHA+XHJcbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiZGF0ZVwiIGlkPVwiZGF0ZVwiIG5hbWU9XCJkYXRlXCIgdmFsdWU9JHtcclxuICAgICAgICAgICAgICBwcm9qZWN0c1twcm9qZWN0SW5kZXhOdW1iZXJdLnRvZG9zW2ldLmR1ZURhdGVcclxuICAgICAgICAgICAgfT5cclxuICAgICAgICAgIDwvcD5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0b2RvLXByaW9yaXR5XCI+XHJcbiAgICAgICAgICAgIDxzZWxlY3QgY2xhc3M9XCJwcmlvcml0eS1zZWxlY3RcIj5cclxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiaGlnaFwiICR7XHJcbiAgICAgICAgICAgICAgICBwcm9qZWN0c1twcm9qZWN0SW5kZXhOdW1iZXJdLnRvZG9zW2ldLnByaW9yaXR5ID09PSBcImhpZ2hcIlxyXG4gICAgICAgICAgICAgICAgICA/IFwic2VsZWN0ZWRcIlxyXG4gICAgICAgICAgICAgICAgICA6IFwiXCJcclxuICAgICAgICAgICAgICB9PmhpZ2hcclxuICAgICAgICAgICAgICA8L29wdGlvbj5cclxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwibWVkaXVtXCIgJHtcclxuICAgICAgICAgICAgICAgIHByb2plY3RzW3Byb2plY3RJbmRleE51bWJlcl0udG9kb3NbaV0ucHJpb3JpdHkgPT09IFwibWVkaXVtXCJcclxuICAgICAgICAgICAgICAgICAgPyBcInNlbGVjdGVkXCJcclxuICAgICAgICAgICAgICAgICAgOiBcIlwiXHJcbiAgICAgICAgICAgICAgfT5tZWRpdW1cclxuICAgICAgICAgICAgICA8L29wdGlvbj5cclxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwibG93XCIgJHtcclxuICAgICAgICAgICAgICAgIHByb2plY3RzW3Byb2plY3RJbmRleE51bWJlcl0udG9kb3NbaV0ucHJpb3JpdHkgPT09IFwibG93XCJcclxuICAgICAgICAgICAgICAgICAgPyBcInNlbGVjdGVkXCJcclxuICAgICAgICAgICAgICAgICAgOiBcIlwiXHJcbiAgICAgICAgICAgICAgfT5sb3dcclxuICAgICAgICAgICAgICA8L29wdGlvbj5cclxuICAgICAgICAgICAgPC9zZWxlY3Q+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidG9kby1hY3Rpb25zXCI+XHJcbiAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImNvbXBsZXRlLWNoZWNrYm94XCI+XHJcbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjb21wbGV0ZS1sYWJlbC10ZXh0XCI+Q29tcGxldGU8L3NwYW4+XHJcbiAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPXRvZG8tY29tcGxldGUgdHlwZT1cImNoZWNrYm94XCIgbmFtZT1cImNoZWNrYm94XCIgJHtwcm9qZWN0c1twcm9qZWN0SW5kZXhOdW1iZXJdLnRvZG9zW2ldLmNvbXBsZXRlID8gXCJjaGVja2VkXCIgOiBcIlwifT5cclxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNvbXBsZXRlLXRvZG8tYnRuXCI+PC9zcGFuPlxyXG4gICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZWRpdC10b2RvLWJ0blwiPlxyXG4gICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLWVkaXRcIj48L2k+IFxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInByb2plY3QtYnRuXCI+XHJcbiAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtdHJhc2gtYWx0IGRlbGV0ZS10b2RvXCI+PC9pPlxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIGA7XHJcbiAgICB0b2RvTGlzdERpdi5hcHBlbmRDaGlsZCh0b2RvRGl2KTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGV4cGFuZFRvZG8ocHJvamVjdEluZGV4LCB0b2RvSW5kZXgpIHtcclxuICAvLyBjb25zdCB0b2RvID0gcHJvamVjdHNbcHJvamVjdEluZGV4XS50b2Rvc1t0b2RvSW5kZXhdO1xyXG4gIC8vIHRvZG9EZXRhaWxzRGl2LmlubmVySFRNTCA9IGBcclxuICAvLyAgICAgICA8aDM+JHt0b2RvLnRpdGxlfTwvaDM+XHJcbiAgLy8gICAgICAgPHA+JHt0b2RvLmRlc2NyaXB0aW9ufTwvcD5cclxuICAvLyAgICAgICA8cD5EdWUgRGF0ZTogJHt0b2RvLmR1ZURhdGV9PC9wPlxyXG4gIC8vICAgICAgIDxwPlByaW9yaXR5OiAke3RvZG8ucHJpb3JpdHl9PC9wPlxyXG4gIC8vICAgICAgIDxidXR0b24gY2xhc3M9XCJlZGl0LXRvZG8tYnRuXCIgZGF0YS1wcm9qZWN0LWluZGV4PVwiJHtwcm9qZWN0SW5kZXh9XCIgZGF0YS10b2RvLWluZGV4PVwiJHt0b2RvSW5kZXh9XCI+RWRpdDwvYnV0dG9uPlxyXG4gIC8vICAgICBgO1xyXG59XHJcblxyXG5jb25zdCB0b2RvRm9ybVByaW9pcml0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kby1mb3JtLXNlbGVjdFwiKTtcclxudG9kb0Zvcm1QcmlvaXJpdHkuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmdW5jdGlvbigpe1xyXG4gIHN3aXRjaCAodGhpcy52YWx1ZSkge1xyXG4gICAgY2FzZSBcImhpZ2hcIjpcclxuICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKFwibWVkaXVtXCIpO1xyXG4gICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoXCJsb3dcIik7XHJcbiAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZChcImhpZ2hcIik7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSBcIm1lZGl1bVwiOlxyXG4gICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoXCJtZWRpdW1cIik7XHJcbiAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZShcImxvd1wiKTtcclxuICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKFwiaGlnaFwiKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIFwibG93XCI6XHJcbiAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZShcIm1lZGl1bVwiKTtcclxuICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKFwibG93XCIpO1xyXG4gICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWdoXCIpO1xyXG4gICAgICBicmVhaztcclxuICB9XHJcbn0pXHJcblxyXG5leHBvcnQgeyB1cGRhdGVQcm9qZWN0cywgdXBkYXRlVG9kb3MsIGV4cGFuZFRvZG8gfTtcclxuIiwiaW1wb3J0IHtcclxuICBhZGRUb2RvVG9Qcm9qZWN0LFxyXG4gIGNoYW5nZVRvZG9Qcmlvcml0eSxcclxuICBjb21wbGV0ZVRvZG8sXHJcbiAgcHJvamVjdHMsXHJcbiAgcmVtb3ZlVG9kb0Zyb21Qcm9qZWN0LFxyXG59IGZyb20gXCIuL2FwcFwiO1xyXG5pbXBvcnQgeyB1cGRhdGVQcm9qZWN0cywgdXBkYXRlVG9kb3MgfSBmcm9tIFwiLi9kb21cIjtcclxuaW1wb3J0IHsgYWRkUHJvamVjdCwgcmVtb3ZlUHJvamVjdCwgZWRpdFByb2plY3ROYW1lIH0gZnJvbSBcIi4vYXBwXCI7XHJcbmltcG9ydCB7IFRvZG8gfSBmcm9tIFwiLi90b2RvXCI7XHJcblxyXG5jb25zdCBwcm9qZWN0QWRkTW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3QtYWRkXCIpO1xyXG5jb25zdCBwcm9qZWN0RWRpdE1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0LWVkaXRcIik7XHJcbmNvbnN0IHByb2plY3RBZGRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3QtYWRkLWJ0blwiKTtcclxuY29uc3QgY2xvc2VTcGFuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jbG9zZS1zcGFuXCIpO1xyXG5jb25zdCBwcm9qZWN0QWRkRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvamVjdC1hZGQtZm9ybVwiKTtcclxuY29uc3QgcHJvamVjdEVkaXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9qZWN0LWVkaXQtZm9ybVwiKTtcclxuY29uc3QgcHJvamVjdExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3QtbGlzdFwiKTtcclxuY29uc3QgZWRpdEhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1wcm9qZWN0LWJ0blwiKTtcclxuY29uc3QgYWRkVG9kb0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLXRvZG8tYnRuXCIpO1xyXG5jb25zdCB0b2RvQWRkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RvZG8tYWRkXCIpO1xyXG5jb25zdCB0b2RvQWRkRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdG9kby1hZGQtZm9ybVwiKTtcclxuY29uc3QgdG9kb0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kby1jb250YWluZXJcIik7XHJcblxyXG5wcm9qZWN0QWRkQnRuLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgcHJvamVjdEFkZE1vZGFsLmNsYXNzTGlzdC5hZGQoXCJzaG93XCIpO1xyXG59O1xyXG5cclxuY2xvc2VTcGFuLmZvckVhY2goKHNwYW4pID0+IHtcclxuICBzcGFuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBwcm9qZWN0QWRkTW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcInNob3dcIik7XHJcbiAgICBwcm9qZWN0RWRpdE1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93XCIpO1xyXG4gICAgdG9kb0FkZE1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93XCIpO1xyXG4gIH0pO1xyXG59KTtcclxuXHJcbndpbmRvdy5vbmNsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgaWYgKFxyXG4gICAgZXZlbnQudGFyZ2V0ID09IHByb2plY3RBZGRNb2RhbCB8fFxyXG4gICAgZXZlbnQudGFyZ2V0ID09IHByb2plY3RFZGl0TW9kYWwgfHxcclxuICAgIGV2ZW50LnRhcmdldCA9PSB0b2RvQWRkTW9kYWxcclxuICApIHtcclxuICAgIHByb2plY3RBZGRNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcclxuICAgIHByb2plY3RFZGl0TW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcInNob3dcIik7XHJcbiAgICB0b2RvQWRkTW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcInNob3dcIik7XHJcbiAgfVxyXG59O1xyXG5cclxucHJvamVjdEFkZEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIHByb2plY3RBZGRNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcclxuICBhZGRQcm9qZWN0KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvamVjdC1uYW1lXCIpLnZhbHVlKTtcclxuICB1cGRhdGVQcm9qZWN0cygpO1xyXG59KTtcclxuXHJcbnByb2plY3RMaXN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xyXG4gIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJkZWxldGVcIikpIHtcclxuICAgIHJlbW92ZVByb2plY3QoZS50YXJnZXQucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXByb2plY3QtaW5kZXhcIikpO1xyXG4gICAgdXBkYXRlUHJvamVjdHMoKTtcclxuICB9XHJcbiAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImVkaXRcIikpIHtcclxuICAgIGVkaXRQcm9qZWN0KGUpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicHJvamVjdFwiKSkge1xyXG4gICAgdXBkYXRlVG9kb3MoZS50YXJnZXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1wcm9qZWN0LWluZGV4XCIpKTtcclxuICB9IGVsc2Uge1xyXG4gICAgdXBkYXRlVG9kb3MoZS50YXJnZXQucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXByb2plY3QtaW5kZXhcIikpO1xyXG4gIH1cclxufSk7XHJcblxyXG5lZGl0SGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xyXG4gIGVkaXRQcm9qZWN0KGUpO1xyXG59KTtcclxuXHJcbmFkZFRvZG9CdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICB0b2RvQWRkTW9kYWwuY2xhc3NMaXN0LmFkZChcInNob3dcIik7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gZWRpdFByb2plY3QoZSkge1xyXG4gIHByb2plY3RFZGl0TW9kYWwuY2xhc3NMaXN0LmFkZChcInNob3dcIik7XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9qZWN0LWVkaXQtbmFtZVwiKS52YWx1ZSA9IGAke1xyXG4gICAgcHJvamVjdHNbZS50YXJnZXQucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXByb2plY3QtaW5kZXhcIildLm5hbWVcclxuICB9YDtcclxuICBwcm9qZWN0RWRpdEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBmdW5jdGlvbiBfbGlzdGVuZXIoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBwcm9qZWN0RWRpdE1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93XCIpO1xyXG4gICAgZWRpdFByb2plY3ROYW1lKFxyXG4gICAgICBlLnRhcmdldC5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZShcImRhdGEtcHJvamVjdC1pbmRleFwiKSxcclxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9qZWN0LWVkaXQtbmFtZVwiKS52YWx1ZVxyXG4gICAgKTtcclxuICAgIHVwZGF0ZVByb2plY3RzKCk7XHJcbiAgICB1cGRhdGVUb2RvcyhlLnRhcmdldC5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZShcImRhdGEtcHJvamVjdC1pbmRleFwiKSk7XHJcbiAgICBwcm9qZWN0RWRpdEZvcm0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBfbGlzdGVuZXIpO1xyXG4gIH0pO1xyXG59XHJcblxyXG50b2RvQWRkRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIHRvZG9BZGRNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcclxuICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSh0b2RvQWRkRm9ybSk7XHJcbiAgY29uc3QgdmFsdWVzID0gT2JqZWN0LmZyb21FbnRyaWVzKGZvcm1EYXRhLmVudHJpZXMoKSk7XHJcbiAgY29uc3QgdG9kbyA9IG5ldyBUb2RvKFxyXG4gICAgdmFsdWVzW1widGl0bGVcIl0sXHJcbiAgICB2YWx1ZXNbXCJkdWUtZGF0ZVwiXSxcclxuICAgIHZhbHVlc1tcInByaW9yaXR5XCJdLFxyXG4gICAgdmFsdWVzW1wiY29tcGxldGVcIl1cclxuICApO1xyXG4gIGFkZFRvZG9Ub1Byb2plY3QoXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG8tY29udGFpbmVyXCIpLmRhdGFzZXQucHJvamVjdEluZGV4LFxyXG4gICAgdG9kb1xyXG4gICk7XHJcbiAgdXBkYXRlVG9kb3MoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvLWNvbnRhaW5lclwiKS5kYXRhc2V0LnByb2plY3RJbmRleCk7XHJcbn0pO1xyXG5cclxudG9kb0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcclxuICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZGVsZXRlLXRvZG9cIikpIHtcclxuICAgIGNvbnN0IHByb2plY3RJbmRleFRvUmVtb3ZlID1cclxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvLWNvbnRhaW5lclwiKS5kYXRhc2V0LnByb2plY3RJbmRleDtcclxuICAgIGNvbnN0IHRvZG9JbmRleFRvUmVtb3ZlID1cclxuICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUuZGF0YXNldC50b2RvSW5kZXg7XHJcbiAgICByZW1vdmVUb2RvRnJvbVByb2plY3QocHJvamVjdEluZGV4VG9SZW1vdmUsIHRvZG9JbmRleFRvUmVtb3ZlKTtcclxuICAgIHVwZGF0ZVRvZG9zKHByb2plY3RJbmRleFRvUmVtb3ZlKTtcclxuICB9XHJcbn0pO1xyXG5cclxudG9kb0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgY29uc3QgcHJvamVjdEluZGV4ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvLWNvbnRhaW5lclwiKS5kYXRhc2V0LnByb2plY3RJbmRleDtcclxuICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidG9kby1jb21wbGV0ZVwiKSkge1xyXG4gICAgY29uc3QgdG9kb0luZGV4VG9Db21wbGV0ZSA9XHJcbiAgICAgIGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlLmRhdGFzZXQudG9kb0luZGV4O1xyXG4gICAgY29tcGxldGVUb2RvKHByb2plY3RJbmRleCwgdG9kb0luZGV4VG9Db21wbGV0ZSwgZS50YXJnZXQuY2hlY2tlZCk7XHJcbiAgfVxyXG4gIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwcmlvcml0eS1zZWxlY3RcIikpIHtcclxuICAgIGNvbnN0IHRvZG9JbmRleFRvUHJpb3JpdHkgPVxyXG4gICAgICBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuZGF0YXNldC50b2RvSW5kZXg7XHJcbiAgICBjaGFuZ2VUb2RvUHJpb3JpdHkoXHJcbiAgICAgIHByb2plY3RJbmRleCxcclxuICAgICAgdG9kb0luZGV4VG9Qcmlvcml0eSxcclxuICAgICAgZS50YXJnZXQudmFsdWVcclxuICAgICk7XHJcbiAgfVxyXG4gIHVwZGF0ZVRvZG9zKHByb2plY3RJbmRleCk7XHJcbn0pO1xyXG4iLCJpbXBvcnQgeyBUb2RvIH0gZnJvbSBcIi4vdG9kby5qc1wiO1xyXG5pbXBvcnQgeyB1cGRhdGVQcm9qZWN0cywgdXBkYXRlVG9kb3MsIGV4cGFuZFRvZG8gfSBmcm9tIFwiLi9kb20uanNcIjtcclxuaW1wb3J0IHsgYWRkUHJvamVjdCwgYWRkVG9kb1RvUHJvamVjdCB9IGZyb20gXCIuL2FwcC5qc1wiO1xyXG5pbXBvcnQgXCIuL2NvbnRyb2xsZXIuanNcIlxyXG5cclxuXHJcbmNvbnN0IHRvZG8xID0gbmV3IFRvZG8oXHJcbiAgXCJGaW5pc2ggcHJvamVjdFwiLFxyXG4gIFwiMjAyMy0wNC0wMVwiLFxyXG4gIFwibWVkaXVtXCIsXHJcbiAgdHJ1ZVxyXG4pO1xyXG5hZGRUb2RvVG9Qcm9qZWN0KDAsIHRvZG8xKTtcclxuYWRkVG9kb1RvUHJvamVjdCgwLCB0b2RvMSk7XHJcbmFkZFRvZG9Ub1Byb2plY3QoMCwgdG9kbzEpO1xyXG5cclxuYWRkUHJvamVjdChcIlNob3BwaW5nIExpc3RcIik7XHJcbmNvbnN0IHRvZG8yID0gbmV3IFRvZG8oXHJcbiAgXCJCdXkgZ3JvY2VyaWVzXCIsXHJcbiAgXCIyMDIzLTA0LTAzXCIsXHJcbiAgXCJtZWRpdW1cIixcclxuICB0cnVlXHJcbik7XHJcbmFkZFRvZG9Ub1Byb2plY3QoMSwgdG9kbzIpO1xyXG5cclxudXBkYXRlUHJvamVjdHMoKTtcclxudXBkYXRlVG9kb3MoMCk7XHJcbmV4cGFuZFRvZG8oMCwgMCk7XHJcblxyXG4iXSwibmFtZXMiOlsiVG9kbyIsInRpdGxlIiwiZHVlRGF0ZSIsInByaW9yaXR5IiwiY29tcGxldGUiLCJ0aGlzIiwiUHJvamVjdCIsIm5hbWUiLCJ0b2RvcyIsInByb2plY3RzIiwiYWRkUHJvamVjdCIsInByb2plY3QiLCJwdXNoIiwiYWRkVG9kb1RvUHJvamVjdCIsInByb2plY3RJbmRleCIsInRvZG8iLCJ1cGRhdGVQcm9qZWN0cyIsInByb2plY3RMaXN0RGl2IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaW5uZXJIVE1MIiwiaSIsImxlbmd0aCIsInByb2plY3REaXYiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiZGF0YXNldCIsImFwcGVuZENoaWxkIiwidXBkYXRlVG9kb3MiLCJwcm9qZWN0SW5kZXhOdW1iZXIiLCJ0b2RvTGlzdERpdiIsInRleHRDb250ZW50IiwidG9kb0RpdiIsInRvZG9JbmRleCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ2YWx1ZSIsInJlbW92ZSIsInByb2plY3RBZGRNb2RhbCIsImdldEVsZW1lbnRCeUlkIiwicHJvamVjdEVkaXRNb2RhbCIsInByb2plY3RBZGRCdG4iLCJjbG9zZVNwYW4iLCJxdWVyeVNlbGVjdG9yQWxsIiwicHJvamVjdEFkZEZvcm0iLCJwcm9qZWN0RWRpdEZvcm0iLCJwcm9qZWN0TGlzdCIsImVkaXRIZWFkZXIiLCJhZGRUb2RvQnRuIiwidG9kb0FkZE1vZGFsIiwidG9kb0FkZEZvcm0iLCJ0b2RvQ29udGFpbmVyIiwiZWRpdFByb2plY3QiLCJlIiwidGFyZ2V0IiwicGFyZW50Tm9kZSIsImdldEF0dHJpYnV0ZSIsIl9saXN0ZW5lciIsImV2ZW50IiwiaW5kZXgiLCJuZXdOYW1lIiwicHJldmVudERlZmF1bHQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwib25jbGljayIsImZvckVhY2giLCJzcGFuIiwid2luZG93IiwiY29udGFpbnMiLCJzcGxpY2UiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwidmFsdWVzIiwiT2JqZWN0IiwiZnJvbUVudHJpZXMiLCJlbnRyaWVzIiwicHJvamVjdEluZGV4VG9SZW1vdmUiLCJjb21wbGV0ZVRvZG8iLCJjaGVja2VkIiwiY2hhbmdlVG9kb1ByaW9yaXR5IiwidG9kbzEiXSwic291cmNlUm9vdCI6IiJ9