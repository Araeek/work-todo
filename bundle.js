(()=>{"use strict";function t(t){this.name=t,this.todos=[]}const e=JSON.parse(localStorage.getItem("projects"))||[];function o(o){const s=new t(o);e.push(s),n()}function n(){localStorage.setItem("projects",JSON.stringify(e))}function s(){const t=document.querySelector("#project-list");t.innerHTML="";for(let o=0;o<e.length;o++){const n=document.createElement("div");n.classList.add("project"),n.dataset.projectIndex=`${o}`,n.innerHTML=`\n          <h3>${e[o].name}</h3>\n          <div class="project-actions">\n            <button class="project-btn" data-project-index="${o}">\n              <i class="fas fa-edit edit"></i> \n            </button>\n            <button class="project-btn" data-project-index="${o}">\n              <i class="fas fa-trash-alt delete"></i>\n            </button>\n          </div>\n        `,t.appendChild(n)}}function a(t){const o=document.querySelector(".todo-container");document.querySelector("#project-title").textContent=`${e[t].name}`,document.querySelector(".project-title-section").dataset.projectIndex=`${t}`,document.querySelector(".edit-project-btn").dataset.projectIndex=`${t}`,document.querySelector(".todo-container").dataset.projectIndex=`${t}`,o.innerHTML="",0===e[t].todos.length&&(o.innerHTML="<h3 class='first-todo'>Click on <span>Add Todo + </span>button to add your first todo to project</h3>");for(let n=0;n<e[t].todos.length;n++){const s=document.createElement("div");s.classList.add("todo"),s.dataset.todoIndex=n,s.innerHTML=`\n          <h3 class="todo-title">${e[t].todos[n].title}</h3>\n          <p>\n            <input class="todo-date" type="date" id="date" name="date" value=${e[t].todos[n].dueDate}>\n          </p>\n          <div class="todo-priority">\n            <select class="priority-select">\n              <option value="high" ${"high"===e[t].todos[n].priority?"selected":""}>high\n              </option>\n              <option value="medium" ${"medium"===e[t].todos[n].priority?"selected":""}>medium\n              </option>\n              <option value="low" ${"low"===e[t].todos[n].priority?"selected":""}>low\n              </option>\n            </select>\n            \n          </div>\n          <div class="todo-actions">\n            <label class="complete-checkbox">\n              <span class="complete-label-text">Complete</span>\n              <input class=todo-complete type="checkbox" name="checkbox" ${e[t].todos[n].complete?"checked":""}>\n              <span class="complete-todo-btn"></span>\n            </label>\n            <button class="edit-todo-btn">\n              <i class="fas fa-edit edit-todo"></i> \n            </button>\n            <button class="project-btn">\n              <i class="fas fa-trash-alt delete-todo"></i>\n            </button>\n          </div>\n        `,o.appendChild(s)}}function c(t,e,o,n){this.title=t,this.dueDate=e,this.priority=o,this.complete=n}document.querySelector(".todo-form-select").addEventListener("change",(function(){switch(this.value){case"high":this.classList.remove("medium"),this.classList.remove("low"),this.classList.add("high");break;case"medium":this.classList.add("medium"),this.classList.remove("low"),this.classList.remove("high");break;case"low":this.classList.remove("medium"),this.classList.add("low"),this.classList.remove("high")}}));const d=document.getElementById("project-add"),r=document.getElementById("project-edit"),i=document.getElementById("project-add-btn"),l=document.querySelectorAll(".close-span"),u=document.querySelector("#project-add-form"),p=document.querySelector("#project-edit-form"),m=document.querySelector("#project-list"),h=document.querySelector(".edit-project-btn"),v=document.querySelector(".add-todo-btn"),f=document.querySelector("#todo-add"),g=document.querySelector("#todo-add-form"),L=document.querySelector(".todo-container");function y(t){r.classList.add("show"),document.querySelector("#project-edit-name").value=`${e[t.target.parentNode.getAttribute("data-project-index")].name}`,p.addEventListener("submit",(function o(n){var c,d;n.preventDefault(),r.classList.remove("show"),c=t.target.parentNode.getAttribute("data-project-index"),d=document.querySelector("#project-edit-name").value,e[c].name=d,s(),a(t.target.parentNode.getAttribute("data-project-index")),p.removeEventListener("submit",o)})),n()}i.onclick=function(){d.classList.add("show")},l.forEach((t=>{t.addEventListener("click",(function(){d.classList.remove("show"),r.classList.remove("show"),f.classList.remove("show")}))})),window.onclick=function(t){t.target!=d&&t.target!=r&&t.target!=f||(d.classList.remove("show"),r.classList.remove("show"),f.classList.remove("show"))},u.addEventListener("submit",(function(t){t.preventDefault(),d.classList.remove("show"),o(document.querySelector("#project-name").value),s(),n()})),m.addEventListener("click",(function(t){var o;t.target.classList.contains("delete")&&(o=t.target.parentNode.getAttribute("data-project-index"),e.splice(o,1),s(),n()),t.target.classList.contains("edit")?y(t):t.target.classList.contains("project")?a(t.target.getAttribute("data-project-index")):a(t.target.parentNode.getAttribute("data-project-index"))})),h.addEventListener("click",(function(t){y(t)})),v.addEventListener("click",(function(){f.classList.add("show")})),g.addEventListener("submit",(function(t){t.preventDefault(),f.classList.remove("show");const o=new FormData(g),s=Object.fromEntries(o.entries()),d=new c(s.title,s["due-date"],s.priority,s.complete);!function(t,o){e[t].todos.push(o)}(document.querySelector(".todo-container").dataset.projectIndex,d),a(document.querySelector(".todo-container").dataset.projectIndex),n()})),L.addEventListener("click",(function(t){if(t.target.classList.contains("delete-todo")){const s=document.querySelector(".todo-container").dataset.projectIndex;o=t.target.parentNode.parentNode.parentNode.dataset.todoIndex,e[s].todos.splice(o,1),a(s),n()}var o;if(t.target.classList.contains("edit-todo")){const o=document.querySelector(".todo-title"),s=document.createElement("input");s.classList.add("todo-title"),s.value=o.textContent,o.replaceWith(s),s.focus(),s.addEventListener("keydown",(o=>{if("Enter"===o.key){const o=document.querySelector(".todo-container").dataset.projectIndex;!function(t,o,n){e[t].todos[o].title=n}(o,t.target.parentNode.parentNode.parentNode.dataset.todoIndex,s.value);const c=document.createElement("h3");c.textContent=s.value,s.replaceWith(c),a(o),n()}}))}})),L.addEventListener("change",(function(t){const o=document.querySelector(".todo-container").dataset.projectIndex;t.target.classList.contains("todo-complete")&&function(t,o,n){e[t].todos[o].complete=n}(o,t.target.parentNode.parentNode.parentNode.dataset.todoIndex,t.target.checked),t.target.classList.contains("priority-select")&&function(t,o,n){e[t].todos[o].priority=n}(o,t.target.parentNode.parentNode.dataset.todoIndex,t.target.value),t.target.classList.contains("todo-date")&&function(t,o,n){e[t].todos[o].dueDate=n}(o,t.target.parentNode.parentNode.dataset.todoIndex,t.target.value),a(o),n()})),0===e.length&&o("Default Project"),s(),a(0)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Iiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9zcmMvYXBwLmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9zcmMvZG9tLmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9zcmMvdG9kby5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0Ly4vc3JjL2NvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBQcm9qZWN0KG5hbWUpIHtcclxuICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gIHRoaXMudG9kb3MgPSBbXTtcclxufVxyXG5cclxuZXhwb3J0IHsgUHJvamVjdCB9O1xyXG4iLCJpbXBvcnQgeyBQcm9qZWN0IH0gZnJvbSBcIi4vcHJvamVjdC5qc1wiO1xyXG5pbXBvcnQgeyBkZWZhdWx0UHJvamVjdCB9IGZyb20gXCIuL2RlZmF1bHRQcm9qZWN0LmpzXCI7XHJcblxyXG5jb25zdCBwcm9qZWN0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJwcm9qZWN0c1wiKSkgfHwgW107XHJcblxyXG5cclxuZnVuY3Rpb24gYWRkUHJvamVjdChuYW1lKSB7XHJcbiAgY29uc3QgcHJvamVjdCA9IG5ldyBQcm9qZWN0KG5hbWUpO1xyXG4gIHByb2plY3RzLnB1c2gocHJvamVjdCk7XHJcbiAgc2F2ZVRvU3RvcmFnZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW1vdmVQcm9qZWN0KGluZGV4KSB7XHJcbiAgcHJvamVjdHMuc3BsaWNlKGluZGV4LCAxKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZWRpdFByb2plY3ROYW1lKGluZGV4LCBuZXdOYW1lKSB7XHJcbiAgcHJvamVjdHNbaW5kZXhdLm5hbWUgPSBuZXdOYW1lO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRUb2RvVG9Qcm9qZWN0KHByb2plY3RJbmRleCwgdG9kbykge1xyXG4gIHByb2plY3RzW3Byb2plY3RJbmRleF0udG9kb3MucHVzaCh0b2RvKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY29tcGxldGVUb2RvKHByb2plY3RJbmRleCwgdG9kb0luZGV4LCB2YWx1ZSkge1xyXG4gIHByb2plY3RzW3Byb2plY3RJbmRleF0udG9kb3NbdG9kb0luZGV4XS5jb21wbGV0ZSA9IHZhbHVlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjaGFuZ2VUb2RvUHJpb3JpdHkocHJvamVjdEluZGV4LCB0b2RvSW5kZXgsIHByaW9yaXR5KSB7XHJcbiAgcHJvamVjdHNbcHJvamVjdEluZGV4XS50b2Rvc1t0b2RvSW5kZXhdLnByaW9yaXR5ID0gcHJpb3JpdHk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoYW5nZVRvZG9EdWVEYXRlKHByb2plY3RJbmRleCwgdG9kb0luZGV4LCBkYXRlKSB7XHJcbiAgcHJvamVjdHNbcHJvamVjdEluZGV4XS50b2Rvc1t0b2RvSW5kZXhdLmR1ZURhdGUgPSBkYXRlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjaGFuZ2VUb2RvTmFtZShwcm9qZWN0SW5kZXgsIHRvZG9JbmRleCwgbmFtZSkge1xyXG4gIHByb2plY3RzW3Byb2plY3RJbmRleF0udG9kb3NbdG9kb0luZGV4XS50aXRsZSA9IG5hbWU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZVRvZG9Gcm9tUHJvamVjdChwcm9qZWN0SW5kZXgsIHRvZG9JbmRleCkge1xyXG4gIHByb2plY3RzW3Byb2plY3RJbmRleF0udG9kb3Muc3BsaWNlKHRvZG9JbmRleCwgMSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNhdmVUb1N0b3JhZ2UoKSB7XHJcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJwcm9qZWN0c1wiLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0cykpO1xyXG59XHJcblxyXG5leHBvcnQge1xyXG4gIGFkZFByb2plY3QsXHJcbiAgcmVtb3ZlUHJvamVjdCxcclxuICBlZGl0UHJvamVjdE5hbWUsXHJcbiAgYWRkVG9kb1RvUHJvamVjdCxcclxuICBjb21wbGV0ZVRvZG8sXHJcbiAgY2hhbmdlVG9kb1ByaW9yaXR5LFxyXG4gIHJlbW92ZVRvZG9Gcm9tUHJvamVjdCxcclxuICBjaGFuZ2VUb2RvRHVlRGF0ZSxcclxuICBjaGFuZ2VUb2RvTmFtZSxcclxuICBzYXZlVG9TdG9yYWdlLFxyXG4gIHByb2plY3RzLFxyXG59O1xyXG4iLCJpbXBvcnQgeyBwcm9qZWN0cyB9IGZyb20gXCIuL2FwcFwiO1xyXG5cclxuZnVuY3Rpb24gdXBkYXRlUHJvamVjdHMoKSB7XHJcbiAgY29uc3QgcHJvamVjdExpc3REaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3QtbGlzdFwiKTtcclxuICBwcm9qZWN0TGlzdERpdi5pbm5lckhUTUwgPSBcIlwiO1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvamVjdHMubGVuZ3RoOyBpKyspIHtcclxuICAgIGNvbnN0IHByb2plY3REaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgcHJvamVjdERpdi5jbGFzc0xpc3QuYWRkKFwicHJvamVjdFwiKTtcclxuICAgIHByb2plY3REaXYuZGF0YXNldC5wcm9qZWN0SW5kZXggPSBgJHtpfWA7XHJcbiAgICBwcm9qZWN0RGl2LmlubmVySFRNTCA9IGBcclxuICAgICAgICAgIDxoMz4ke3Byb2plY3RzW2ldLm5hbWV9PC9oMz5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcm9qZWN0LWFjdGlvbnNcIj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInByb2plY3QtYnRuXCIgZGF0YS1wcm9qZWN0LWluZGV4PVwiJHtpfVwiPlxyXG4gICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLWVkaXQgZWRpdFwiPjwvaT4gXHJcbiAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwicHJvamVjdC1idG5cIiBkYXRhLXByb2plY3QtaW5kZXg9XCIke2l9XCI+XHJcbiAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtdHJhc2gtYWx0IGRlbGV0ZVwiPjwvaT5cclxuICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICBgO1xyXG4gICAgcHJvamVjdExpc3REaXYuYXBwZW5kQ2hpbGQocHJvamVjdERpdik7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVUb2Rvcyhwcm9qZWN0SW5kZXhOdW1iZXIpIHtcclxuICBjb25zdCB0b2RvTGlzdERpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kby1jb250YWluZXJcIik7XHJcbiAgY29uc3QgcHJvamVjdFRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9qZWN0LXRpdGxlXCIpO1xyXG4gIHByb2plY3RUaXRsZS50ZXh0Q29udGVudCA9IGAke3Byb2plY3RzW3Byb2plY3RJbmRleE51bWJlcl0ubmFtZX1gO1xyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICBcIi5wcm9qZWN0LXRpdGxlLXNlY3Rpb25cIlxyXG4gICkuZGF0YXNldC5wcm9qZWN0SW5kZXggPSBgJHtwcm9qZWN0SW5kZXhOdW1iZXJ9YDtcclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgXCIuZWRpdC1wcm9qZWN0LWJ0blwiXHJcbiAgKS5kYXRhc2V0LnByb2plY3RJbmRleCA9IGAke3Byb2plY3RJbmRleE51bWJlcn1gO1xyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICBcIi50b2RvLWNvbnRhaW5lclwiXHJcbiAgKS5kYXRhc2V0LnByb2plY3RJbmRleCA9IGAke3Byb2plY3RJbmRleE51bWJlcn1gO1xyXG4gIHRvZG9MaXN0RGl2LmlubmVySFRNTCA9IFwiXCI7XHJcbiAgaWYgKHByb2plY3RzW3Byb2plY3RJbmRleE51bWJlcl0udG9kb3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICB0b2RvTGlzdERpdi5pbm5lckhUTUwgPSBcIjxoMyBjbGFzcz0nZmlyc3QtdG9kbyc+Q2xpY2sgb24gPHNwYW4+QWRkIFRvZG8gKyA8L3NwYW4+YnV0dG9uIHRvIGFkZCB5b3VyIGZpcnN0IHRvZG8gdG8gcHJvamVjdDwvaDM+XCJcclxuICB9IGVsc2Uge1xyXG4gICAgXHJcbiAgfVxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvamVjdHNbcHJvamVjdEluZGV4TnVtYmVyXS50b2Rvcy5sZW5ndGg7IGkrKykge1xyXG4gICAgY29uc3QgdG9kb0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICB0b2RvRGl2LmNsYXNzTGlzdC5hZGQoXCJ0b2RvXCIpO1xyXG4gICAgdG9kb0Rpdi5kYXRhc2V0LnRvZG9JbmRleCA9IGk7XHJcbiAgICB0b2RvRGl2LmlubmVySFRNTCA9IGBcclxuICAgICAgICAgIDxoMyBjbGFzcz1cInRvZG8tdGl0bGVcIj4ke1xyXG4gICAgICAgICAgICBwcm9qZWN0c1twcm9qZWN0SW5kZXhOdW1iZXJdLnRvZG9zW2ldLnRpdGxlXHJcbiAgICAgICAgICB9PC9oMz5cclxuICAgICAgICAgIDxwPlxyXG4gICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJ0b2RvLWRhdGVcIiB0eXBlPVwiZGF0ZVwiIGlkPVwiZGF0ZVwiIG5hbWU9XCJkYXRlXCIgdmFsdWU9JHtcclxuICAgICAgICAgICAgICBwcm9qZWN0c1twcm9qZWN0SW5kZXhOdW1iZXJdLnRvZG9zW2ldLmR1ZURhdGVcclxuICAgICAgICAgICAgfT5cclxuICAgICAgICAgIDwvcD5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0b2RvLXByaW9yaXR5XCI+XHJcbiAgICAgICAgICAgIDxzZWxlY3QgY2xhc3M9XCJwcmlvcml0eS1zZWxlY3RcIj5cclxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiaGlnaFwiICR7XHJcbiAgICAgICAgICAgICAgICBwcm9qZWN0c1twcm9qZWN0SW5kZXhOdW1iZXJdLnRvZG9zW2ldLnByaW9yaXR5ID09PSBcImhpZ2hcIlxyXG4gICAgICAgICAgICAgICAgICA/IFwic2VsZWN0ZWRcIlxyXG4gICAgICAgICAgICAgICAgICA6IFwiXCJcclxuICAgICAgICAgICAgICB9PmhpZ2hcclxuICAgICAgICAgICAgICA8L29wdGlvbj5cclxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwibWVkaXVtXCIgJHtcclxuICAgICAgICAgICAgICAgIHByb2plY3RzW3Byb2plY3RJbmRleE51bWJlcl0udG9kb3NbaV0ucHJpb3JpdHkgPT09IFwibWVkaXVtXCJcclxuICAgICAgICAgICAgICAgICAgPyBcInNlbGVjdGVkXCJcclxuICAgICAgICAgICAgICAgICAgOiBcIlwiXHJcbiAgICAgICAgICAgICAgfT5tZWRpdW1cclxuICAgICAgICAgICAgICA8L29wdGlvbj5cclxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwibG93XCIgJHtcclxuICAgICAgICAgICAgICAgIHByb2plY3RzW3Byb2plY3RJbmRleE51bWJlcl0udG9kb3NbaV0ucHJpb3JpdHkgPT09IFwibG93XCJcclxuICAgICAgICAgICAgICAgICAgPyBcInNlbGVjdGVkXCJcclxuICAgICAgICAgICAgICAgICAgOiBcIlwiXHJcbiAgICAgICAgICAgICAgfT5sb3dcclxuICAgICAgICAgICAgICA8L29wdGlvbj5cclxuICAgICAgICAgICAgPC9zZWxlY3Q+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidG9kby1hY3Rpb25zXCI+XHJcbiAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImNvbXBsZXRlLWNoZWNrYm94XCI+XHJcbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjb21wbGV0ZS1sYWJlbC10ZXh0XCI+Q29tcGxldGU8L3NwYW4+XHJcbiAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPXRvZG8tY29tcGxldGUgdHlwZT1cImNoZWNrYm94XCIgbmFtZT1cImNoZWNrYm94XCIgJHtcclxuICAgICAgICAgICAgICAgIHByb2plY3RzW3Byb2plY3RJbmRleE51bWJlcl0udG9kb3NbaV0uY29tcGxldGUgPyBcImNoZWNrZWRcIiA6IFwiXCJcclxuICAgICAgICAgICAgICB9PlxyXG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY29tcGxldGUtdG9kby1idG5cIj48L3NwYW4+XHJcbiAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJlZGl0LXRvZG8tYnRuXCI+XHJcbiAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtZWRpdCBlZGl0LXRvZG9cIj48L2k+IFxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInByb2plY3QtYnRuXCI+XHJcbiAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtdHJhc2gtYWx0IGRlbGV0ZS10b2RvXCI+PC9pPlxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIGA7XHJcbiAgICB0b2RvTGlzdERpdi5hcHBlbmRDaGlsZCh0b2RvRGl2KTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGV4cGFuZFRvZG8ocHJvamVjdEluZGV4LCB0b2RvSW5kZXgpIHtcclxuICAvLyBjb25zdCB0b2RvID0gcHJvamVjdHNbcHJvamVjdEluZGV4XS50b2Rvc1t0b2RvSW5kZXhdO1xyXG4gIC8vIHRvZG9EZXRhaWxzRGl2LmlubmVySFRNTCA9IGBcclxuICAvLyAgICAgICA8aDM+JHt0b2RvLnRpdGxlfTwvaDM+XHJcbiAgLy8gICAgICAgPHA+JHt0b2RvLmRlc2NyaXB0aW9ufTwvcD5cclxuICAvLyAgICAgICA8cD5EdWUgRGF0ZTogJHt0b2RvLmR1ZURhdGV9PC9wPlxyXG4gIC8vICAgICAgIDxwPlByaW9yaXR5OiAke3RvZG8ucHJpb3JpdHl9PC9wPlxyXG4gIC8vICAgICAgIDxidXR0b24gY2xhc3M9XCJlZGl0LXRvZG8tYnRuXCIgZGF0YS1wcm9qZWN0LWluZGV4PVwiJHtwcm9qZWN0SW5kZXh9XCIgZGF0YS10b2RvLWluZGV4PVwiJHt0b2RvSW5kZXh9XCI+RWRpdDwvYnV0dG9uPlxyXG4gIC8vICAgICBgO1xyXG59XHJcblxyXG5jb25zdCB0b2RvRm9ybVByaW9pcml0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kby1mb3JtLXNlbGVjdFwiKTtcclxudG9kb0Zvcm1QcmlvaXJpdHkuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgc3dpdGNoICh0aGlzLnZhbHVlKSB7XHJcbiAgICBjYXNlIFwiaGlnaFwiOlxyXG4gICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoXCJtZWRpdW1cIik7XHJcbiAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZShcImxvd1wiKTtcclxuICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKFwiaGlnaFwiKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIFwibWVkaXVtXCI6XHJcbiAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZChcIm1lZGl1bVwiKTtcclxuICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKFwibG93XCIpO1xyXG4gICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWdoXCIpO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgXCJsb3dcIjpcclxuICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKFwibWVkaXVtXCIpO1xyXG4gICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoXCJsb3dcIik7XHJcbiAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZShcImhpZ2hcIik7XHJcbiAgICAgIGJyZWFrO1xyXG4gIH1cclxufSk7XHJcblxyXG5leHBvcnQgeyB1cGRhdGVQcm9qZWN0cywgdXBkYXRlVG9kb3MsIGV4cGFuZFRvZG8gfTtcclxuIiwiZnVuY3Rpb24gVG9kbyh0aXRsZSwgZHVlRGF0ZSwgcHJpb3JpdHksIGNvbXBsZXRlKSB7XHJcbiAgdGhpcy50aXRsZSA9IHRpdGxlO1xyXG4gIHRoaXMuZHVlRGF0ZSA9IGR1ZURhdGU7XHJcbiAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xyXG4gIHRoaXMuY29tcGxldGUgPSBjb21wbGV0ZTtcclxufVxyXG5cclxuZXhwb3J0IHsgVG9kbyB9O1xyXG4iLCJpbXBvcnQge1xyXG4gIGFkZFRvZG9Ub1Byb2plY3QsXHJcbiAgY2hhbmdlVG9kb1ByaW9yaXR5LFxyXG4gIGNvbXBsZXRlVG9kbyxcclxuICBwcm9qZWN0cyxcclxuICByZW1vdmVUb2RvRnJvbVByb2plY3QsXHJcbiAgY2hhbmdlVG9kb0R1ZURhdGUsXHJcbiAgY2hhbmdlVG9kb05hbWUsXHJcbiAgc2F2ZVRvU3RvcmFnZSxcclxufSBmcm9tIFwiLi9hcHBcIjtcclxuaW1wb3J0IHsgdXBkYXRlUHJvamVjdHMsIHVwZGF0ZVRvZG9zIH0gZnJvbSBcIi4vZG9tXCI7XHJcbmltcG9ydCB7IGFkZFByb2plY3QsIHJlbW92ZVByb2plY3QsIGVkaXRQcm9qZWN0TmFtZSB9IGZyb20gXCIuL2FwcFwiO1xyXG5pbXBvcnQgeyBUb2RvIH0gZnJvbSBcIi4vdG9kb1wiO1xyXG5cclxuY29uc3QgcHJvamVjdEFkZE1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0LWFkZFwiKTtcclxuY29uc3QgcHJvamVjdEVkaXRNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdC1lZGl0XCIpO1xyXG5jb25zdCBwcm9qZWN0QWRkQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0LWFkZC1idG5cIik7XHJcbmNvbnN0IGNsb3NlU3BhbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2xvc2Utc3BhblwiKTtcclxuY29uc3QgcHJvamVjdEFkZEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3QtYWRkLWZvcm1cIik7XHJcbmNvbnN0IHByb2plY3RFZGl0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvamVjdC1lZGl0LWZvcm1cIik7XHJcbmNvbnN0IHByb2plY3RMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9qZWN0LWxpc3RcIik7XHJcbmNvbnN0IGVkaXRIZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtcHJvamVjdC1idG5cIik7XHJcbmNvbnN0IGFkZFRvZG9CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC10b2RvLWJ0blwiKTtcclxuY29uc3QgdG9kb0FkZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0b2RvLWFkZFwiKTtcclxuY29uc3QgdG9kb0FkZEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RvZG8tYWRkLWZvcm1cIik7XHJcbmNvbnN0IHRvZG9Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG8tY29udGFpbmVyXCIpO1xyXG5cclxucHJvamVjdEFkZEJ0bi5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gIHByb2plY3RBZGRNb2RhbC5jbGFzc0xpc3QuYWRkKFwic2hvd1wiKTtcclxufTtcclxuXHJcbmNsb3NlU3Bhbi5mb3JFYWNoKChzcGFuKSA9PiB7XHJcbiAgc3Bhbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgcHJvamVjdEFkZE1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93XCIpO1xyXG4gICAgcHJvamVjdEVkaXRNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcclxuICAgIHRvZG9BZGRNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcclxuICB9KTtcclxufSk7XHJcblxyXG53aW5kb3cub25jbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gIGlmIChcclxuICAgIGV2ZW50LnRhcmdldCA9PSBwcm9qZWN0QWRkTW9kYWwgfHxcclxuICAgIGV2ZW50LnRhcmdldCA9PSBwcm9qZWN0RWRpdE1vZGFsIHx8XHJcbiAgICBldmVudC50YXJnZXQgPT0gdG9kb0FkZE1vZGFsXHJcbiAgKSB7XHJcbiAgICBwcm9qZWN0QWRkTW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcInNob3dcIik7XHJcbiAgICBwcm9qZWN0RWRpdE1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93XCIpO1xyXG4gICAgdG9kb0FkZE1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93XCIpO1xyXG4gIH1cclxufTtcclxuXHJcbnByb2plY3RBZGRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICBwcm9qZWN0QWRkTW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcInNob3dcIik7XHJcbiAgYWRkUHJvamVjdChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3QtbmFtZVwiKS52YWx1ZSk7XHJcbiAgdXBkYXRlUHJvamVjdHMoKTtcclxuICBzYXZlVG9TdG9yYWdlKCk7XHJcbn0pO1xyXG5cclxucHJvamVjdExpc3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImRlbGV0ZVwiKSkge1xyXG4gICAgcmVtb3ZlUHJvamVjdChlLnRhcmdldC5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZShcImRhdGEtcHJvamVjdC1pbmRleFwiKSk7XHJcbiAgICB1cGRhdGVQcm9qZWN0cygpO1xyXG4gICAgc2F2ZVRvU3RvcmFnZSgpO1xyXG4gIH1cclxuICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZWRpdFwiKSkge1xyXG4gICAgZWRpdFByb2plY3QoZSk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwcm9qZWN0XCIpKSB7XHJcbiAgICB1cGRhdGVUb2RvcyhlLnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXByb2plY3QtaW5kZXhcIikpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB1cGRhdGVUb2RvcyhlLnRhcmdldC5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZShcImRhdGEtcHJvamVjdC1pbmRleFwiKSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbmVkaXRIZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgZWRpdFByb2plY3QoZSk7XHJcbn0pO1xyXG5cclxuYWRkVG9kb0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gIHRvZG9BZGRNb2RhbC5jbGFzc0xpc3QuYWRkKFwic2hvd1wiKTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBlZGl0UHJvamVjdChlKSB7XHJcbiAgcHJvamVjdEVkaXRNb2RhbC5jbGFzc0xpc3QuYWRkKFwic2hvd1wiKTtcclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3QtZWRpdC1uYW1lXCIpLnZhbHVlID0gYCR7XHJcbiAgICBwcm9qZWN0c1tlLnRhcmdldC5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZShcImRhdGEtcHJvamVjdC1pbmRleFwiKV0ubmFtZVxyXG4gIH1gO1xyXG4gIHByb2plY3RFZGl0Rm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGZ1bmN0aW9uIF9saXN0ZW5lcihldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIHByb2plY3RFZGl0TW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcInNob3dcIik7XHJcbiAgICBlZGl0UHJvamVjdE5hbWUoXHJcbiAgICAgIGUudGFyZ2V0LnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1wcm9qZWN0LWluZGV4XCIpLFxyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3QtZWRpdC1uYW1lXCIpLnZhbHVlXHJcbiAgICApO1xyXG4gICAgdXBkYXRlUHJvamVjdHMoKTtcclxuICAgIHVwZGF0ZVRvZG9zKGUudGFyZ2V0LnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1wcm9qZWN0LWluZGV4XCIpKTtcclxuICAgIHByb2plY3RFZGl0Rm9ybS5yZW1vdmVFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIF9saXN0ZW5lcik7XHJcbiAgfSk7XHJcbiAgc2F2ZVRvU3RvcmFnZSgpO1xyXG59XHJcblxyXG50b2RvQWRkRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIHRvZG9BZGRNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcclxuICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSh0b2RvQWRkRm9ybSk7XHJcbiAgY29uc3QgdmFsdWVzID0gT2JqZWN0LmZyb21FbnRyaWVzKGZvcm1EYXRhLmVudHJpZXMoKSk7XHJcbiAgY29uc3QgdG9kbyA9IG5ldyBUb2RvKFxyXG4gICAgdmFsdWVzW1widGl0bGVcIl0sXHJcbiAgICB2YWx1ZXNbXCJkdWUtZGF0ZVwiXSxcclxuICAgIHZhbHVlc1tcInByaW9yaXR5XCJdLFxyXG4gICAgdmFsdWVzW1wiY29tcGxldGVcIl1cclxuICApO1xyXG4gIGFkZFRvZG9Ub1Byb2plY3QoXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG8tY29udGFpbmVyXCIpLmRhdGFzZXQucHJvamVjdEluZGV4LFxyXG4gICAgdG9kb1xyXG4gICk7XHJcbiAgdXBkYXRlVG9kb3MoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvLWNvbnRhaW5lclwiKS5kYXRhc2V0LnByb2plY3RJbmRleCk7XHJcbiAgc2F2ZVRvU3RvcmFnZSgpO1xyXG59KTtcclxuXHJcbnRvZG9Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImRlbGV0ZS10b2RvXCIpKSB7XHJcbiAgICBjb25zdCBwcm9qZWN0SW5kZXhUb1JlbW92ZSA9XHJcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kby1jb250YWluZXJcIikuZGF0YXNldC5wcm9qZWN0SW5kZXg7XHJcbiAgICBjb25zdCB0b2RvSW5kZXhUb1JlbW92ZSA9XHJcbiAgICAgIGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlLmRhdGFzZXQudG9kb0luZGV4O1xyXG4gICAgcmVtb3ZlVG9kb0Zyb21Qcm9qZWN0KHByb2plY3RJbmRleFRvUmVtb3ZlLCB0b2RvSW5kZXhUb1JlbW92ZSk7XHJcbiAgICB1cGRhdGVUb2Rvcyhwcm9qZWN0SW5kZXhUb1JlbW92ZSk7XHJcbiAgICBzYXZlVG9TdG9yYWdlKCk7XHJcbiAgfVxyXG5cclxuICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZWRpdC10b2RvXCIpKSB7XHJcbiAgICBjb25zdCB0b2RvVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG8tdGl0bGVcIik7XHJcbiAgICBjb25zdCBpbnB1dEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKFwidG9kby10aXRsZVwiKTtcclxuICAgIGlucHV0RWwudmFsdWUgPSB0b2RvVGl0bGUudGV4dENvbnRlbnQ7XHJcbiAgICB0b2RvVGl0bGUucmVwbGFjZVdpdGgoaW5wdXRFbCk7XHJcbiAgICBpbnB1dEVsLmZvY3VzKCk7XHJcbiAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChldikgPT4ge1xyXG4gICAgICBpZiAoZXYua2V5ID09PSBcIkVudGVyXCIpIHtcclxuICAgICAgICBjb25zdCBwcm9qZWN0SW5kZXhUb0VkaXQgPVxyXG4gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvLWNvbnRhaW5lclwiKS5kYXRhc2V0LnByb2plY3RJbmRleDtcclxuICAgICAgICBjb25zdCB0b2RvSW5kZXhUb0VkaXQgPVxyXG4gICAgICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUuZGF0YXNldC50b2RvSW5kZXg7XHJcbiAgICAgICAgY2hhbmdlVG9kb05hbWUocHJvamVjdEluZGV4VG9FZGl0LCB0b2RvSW5kZXhUb0VkaXQsIGlucHV0RWwudmFsdWUpO1xyXG4gICAgICAgIGNvbnN0IG5ld1RpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgzXCIpO1xyXG4gICAgICAgIG5ld1RpdGxlLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWx1ZTtcclxuICAgICAgICBpbnB1dEVsLnJlcGxhY2VXaXRoKG5ld1RpdGxlKTtcclxuICAgICAgICB1cGRhdGVUb2Rvcyhwcm9qZWN0SW5kZXhUb0VkaXQpO1xyXG4gICAgICAgIHNhdmVUb1N0b3JhZ2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbnRvZG9Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xyXG4gIGNvbnN0IHByb2plY3RJbmRleCA9XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG8tY29udGFpbmVyXCIpLmRhdGFzZXQucHJvamVjdEluZGV4O1xyXG4gIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJ0b2RvLWNvbXBsZXRlXCIpKSB7XHJcbiAgICBjb25zdCB0b2RvSW5kZXhUb0NvbXBsZXRlID1cclxuICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUuZGF0YXNldC50b2RvSW5kZXg7XHJcbiAgICBjb21wbGV0ZVRvZG8ocHJvamVjdEluZGV4LCB0b2RvSW5kZXhUb0NvbXBsZXRlLCBlLnRhcmdldC5jaGVja2VkKTtcclxuICB9XHJcbiAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInByaW9yaXR5LXNlbGVjdFwiKSkge1xyXG4gICAgY29uc3QgdG9kb0luZGV4VG9Qcmlvcml0eSA9XHJcbiAgICAgIGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5kYXRhc2V0LnRvZG9JbmRleDtcclxuICAgIGNoYW5nZVRvZG9Qcmlvcml0eShwcm9qZWN0SW5kZXgsIHRvZG9JbmRleFRvUHJpb3JpdHksIGUudGFyZ2V0LnZhbHVlKTtcclxuICB9XHJcbiAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInRvZG8tZGF0ZVwiKSkge1xyXG4gICAgY29uc3QgdG9kb0luZGV4VG9EYXRlID0gZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmRhdGFzZXQudG9kb0luZGV4O1xyXG4gICAgY2hhbmdlVG9kb0R1ZURhdGUocHJvamVjdEluZGV4LCB0b2RvSW5kZXhUb0RhdGUsIGUudGFyZ2V0LnZhbHVlKTtcclxuICB9XHJcbiAgdXBkYXRlVG9kb3MocHJvamVjdEluZGV4KTtcclxuICBzYXZlVG9TdG9yYWdlKCk7XHJcbn0pO1xyXG4iLCJpbXBvcnQgeyBUb2RvIH0gZnJvbSBcIi4vdG9kby5qc1wiO1xyXG5pbXBvcnQgeyB1cGRhdGVQcm9qZWN0cywgdXBkYXRlVG9kb3MsIGV4cGFuZFRvZG8gfSBmcm9tIFwiLi9kb20uanNcIjtcclxuaW1wb3J0IHsgYWRkUHJvamVjdCwgcHJvamVjdHMgfSBmcm9tIFwiLi9hcHAuanNcIjtcclxuaW1wb3J0IFwiLi9jb250cm9sbGVyLmpzXCI7XHJcblxyXG4vLyBjb25zdCB0b2RvMSA9IG5ldyBUb2RvKFxyXG4vLyAgIFwiRmluaXNoIHByb2plY3RcIixcclxuLy8gICBcIjIwMjMtMDQtMDFcIixcclxuLy8gICBcIm1lZGl1bVwiLFxyXG4vLyAgIHRydWVcclxuLy8gKTtcclxuLy8gYWRkVG9kb1RvUHJvamVjdCgwLCB0b2RvMSk7XHJcbi8vIGFkZFRvZG9Ub1Byb2plY3QoMCwgdG9kbzEpO1xyXG4vLyBhZGRUb2RvVG9Qcm9qZWN0KDAsIHRvZG8xKTtcclxuXHJcbi8vIGFkZFByb2plY3QoXCJTaG9wcGluZyBMaXN0XCIpO1xyXG4vLyBjb25zdCB0b2RvMiA9IG5ldyBUb2RvKFxyXG4vLyAgIFwiQnV5IGdyb2Nlcmllc1wiLFxyXG4vLyAgIFwiMjAyMy0wNC0wM1wiLFxyXG4vLyAgIFwibWVkaXVtXCIsXHJcbi8vICAgdHJ1ZVxyXG4vLyApO1xyXG4vLyBhZGRUb2RvVG9Qcm9qZWN0KDEsIHRvZG8yKTtcclxuaWYgKHByb2plY3RzLmxlbmd0aCA9PT0gMCkge1xyXG4gIGFkZFByb2plY3QoXCJEZWZhdWx0IFByb2plY3RcIik7XHJcbn1cclxuXHJcbnVwZGF0ZVByb2plY3RzKCk7XHJcbnVwZGF0ZVRvZG9zKDApO1xyXG4iXSwibmFtZXMiOlsiUHJvamVjdCIsIm5hbWUiLCJ0aGlzIiwidG9kb3MiLCJwcm9qZWN0cyIsIkpTT04iLCJwYXJzZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJhZGRQcm9qZWN0IiwicHJvamVjdCIsInB1c2giLCJzYXZlVG9TdG9yYWdlIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsInVwZGF0ZVByb2plY3RzIiwicHJvamVjdExpc3REaXYiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpbm5lckhUTUwiLCJpIiwibGVuZ3RoIiwicHJvamVjdERpdiIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJkYXRhc2V0IiwicHJvamVjdEluZGV4IiwiYXBwZW5kQ2hpbGQiLCJ1cGRhdGVUb2RvcyIsInByb2plY3RJbmRleE51bWJlciIsInRvZG9MaXN0RGl2IiwidGV4dENvbnRlbnQiLCJ0b2RvRGl2IiwidG9kb0luZGV4IiwidGl0bGUiLCJkdWVEYXRlIiwicHJpb3JpdHkiLCJjb21wbGV0ZSIsIlRvZG8iLCJhZGRFdmVudExpc3RlbmVyIiwidmFsdWUiLCJyZW1vdmUiLCJwcm9qZWN0QWRkTW9kYWwiLCJnZXRFbGVtZW50QnlJZCIsInByb2plY3RFZGl0TW9kYWwiLCJwcm9qZWN0QWRkQnRuIiwiY2xvc2VTcGFuIiwicXVlcnlTZWxlY3RvckFsbCIsInByb2plY3RBZGRGb3JtIiwicHJvamVjdEVkaXRGb3JtIiwicHJvamVjdExpc3QiLCJlZGl0SGVhZGVyIiwiYWRkVG9kb0J0biIsInRvZG9BZGRNb2RhbCIsInRvZG9BZGRGb3JtIiwidG9kb0NvbnRhaW5lciIsImVkaXRQcm9qZWN0IiwiZSIsInRhcmdldCIsInBhcmVudE5vZGUiLCJnZXRBdHRyaWJ1dGUiLCJfbGlzdGVuZXIiLCJldmVudCIsImluZGV4IiwibmV3TmFtZSIsInByZXZlbnREZWZhdWx0IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm9uY2xpY2siLCJmb3JFYWNoIiwic3BhbiIsIndpbmRvdyIsImNvbnRhaW5zIiwic3BsaWNlIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsInZhbHVlcyIsIk9iamVjdCIsImZyb21FbnRyaWVzIiwiZW50cmllcyIsInRvZG8iLCJhZGRUb2RvVG9Qcm9qZWN0IiwicHJvamVjdEluZGV4VG9SZW1vdmUiLCJ0b2RvVGl0bGUiLCJpbnB1dEVsIiwicmVwbGFjZVdpdGgiLCJmb2N1cyIsImV2Iiwia2V5IiwicHJvamVjdEluZGV4VG9FZGl0IiwiY2hhbmdlVG9kb05hbWUiLCJuZXdUaXRsZSIsImNvbXBsZXRlVG9kbyIsImNoZWNrZWQiLCJjaGFuZ2VUb2RvUHJpb3JpdHkiLCJkYXRlIiwiY2hhbmdlVG9kb0R1ZURhdGUiXSwic291cmNlUm9vdCI6IiJ9